try { __ez.fads.adLoadHB=(__ez.fads.adLoadHB&&__ez.fads.adLoadHB.loaded===true)?__ez.fads.adLoadHB:{loaded:true,timeoutSet:false,auctionStatus:{},version:1,maxFloor:2,log:__ez.fads.log,lastAuctionTimes:{},bangerName:'IL11ILILIIlLLLILILLLLIILLLIIL11111LLILiiLIliLlILlLiiLLIiILL',minTimeBetweenAuctions:20000,hbIds:[],maxWait:450,waited:0,init:function(vp_ht,doc_ht,version){__ez_fad_pb();this.version=version;this.initFeatureMap();},reset:function(){this.auctionStatus={};this.sentIDPixel=false;},cleanupAdData:function(divId){this.hbIds=this.hbIds.filter(function(id){return id!==divId;});delete this.auctionStatus[divId];},LoadAd:function(ids,count,floors,timeout){if(!Array.isArray(ids)){ids=[ids];}
if(isNaN(count))count=0;if(typeof epbjs==='undefined'||typeof epbjs.requestBids!=='function'||typeof epbjs.addAdUnits!=='function'){setTimeout(function(){__ez.fads.adLoadHB.LoadAd(ids,count+1,floors,timeout)},100);return;}
if(count<1){floors=this.convertBr1ToHBFloors(floors);}
this.setTimeout(2000);var slots=[];var alreadyRunning=[];for(var i=0;i<ids.length;i++){var id=ids[i];if(!this.isAuctionRunning(id)&&this.isLongEnoughBetweenAuctions(id)){var slot=this.GetHBAdunitById(id);if(slot===false&&id.indexOf('-dynamic')!=-1){var baseId=id.replace(/-dynamic(-multi-[0-9]+)?$/,'');var baseSlot=this.GetHBAdunitById(baseId);if(baseSlot!=false){var adUnit2=Object.assign({},baseSlot,{code:id});epbjs.addAdUnits(adUnit2);epbjs.ezAdUnits.push(adUnit2);slot=adUnit2;}}
if(slot===false){__ez.fads.AdLoadComplete('adLoadHB',[id]);ids.splice(i,1);i--;continue;}
if(slot.bids.length==0){__ez.fads.AdLoadComplete('adLoadHB',[id]);ids.splice(i,1);i--;continue;}
if(typeof slot!=='undefined'&&slot!=null){slots.push(slot);}else{this.log('Unable to load hb ad. Slot not found.',id);}}else{alreadyRunning.push(id);}}
if(slots.length+alreadyRunning.length==ids.length&&slots.length>0){this.requestBids(ids,slots,floors,timeout);}else if(alreadyRunning.length==ids.length){return;}else if(count<50){var to=(count*10>100)?count*10:100;setTimeout(function(){__ez.fads.adLoadHB.LoadAd(ids,count+1,floors,timeout)},to);}else{for(var i=0;i<ids.length;i++){this.auctionStatus[ids[i]]='complete';}}},convertBr1ToHBFloors:function(br1Floors){var hbFloors={};for(var k in br1Floors){var f=br1Floors[k]/100*.05;hbFloors[k]=(f>this.maxFloor)?this.maxFloor:Math.round(f*100)/100;}
return hbFloors;},setUpGlobalEvents:function(){if(this.preBidEventsSetup){return;}
this.preBidEventsSetup=true;this.setUpEventListeners();if(__ez.fads.logEnabled&&false){epbjs.mergeConfig({debug:true});}},adFill:function(id){this.auctionStatus[id]=null;this.bidCache.releaseBid(id);},FilterByAuctionEligible:function(ids){var auctionEligible=[];var auctionNotEligble=[];var auctionRunning=[];for(var i=0;i<ids.length;i++){if(this.isLongEnoughBetweenAuctions(ids[i])){auctionEligible.push(ids[i]);}else if(this.isAuctionRunning(ids[i])==false){auctionNotEligble.push(ids[i]);}else{auctionRunning.push(ids[i]);}}
return{'eligible':auctionEligible,'notEligible':auctionNotEligble,'running':auctionRunning};},isLongEnoughBetweenAuctions:function(id){if(typeof this.lastAuctionTimes[id]=='undefined'){return true;}
var now=new Date().getTime();var diff=now-this.lastAuctionTimes[id];var isLongEnough=diff>this.minTimeBetweenAuctions;if(!isLongEnough){}
return isLongEnough;},requestBids:function(ids,adUnits,floors,timeout){if(typeof timeout==='undefined'){timeout=2000;}
if(timeout<800){timeout=800;}
for(var i=0;i<ids.length;i++){this.auctionStatus[ids[i]]='running';this.lastAuctionTimes[ids[i]]=new Date().getTime();}
if(typeof epbjs==='undefined'||typeof epbjs.requestBids!=='function'||typeof epbjs.addAdUnits!=='function'){setTimeout(function(){__ez.fads.adLoadHB.requestBids(ids,adUnits,floors,timeout)},100);return;}
if(typeof ezoicIdentity==='undefined'||typeof ezoicIdentity.isIdentityReady!=='function'||!ezoicIdentity.isIdentityReady()){setTimeout(function(){__ez.fads.adLoadHB.requestBids(ids,adUnits,floors,timeout)},100);return;}
this.setUpGlobalEvents();this.callEpbjsTrident(ids,adUnits,timeout);},callEpjsRunAdUnits:function(ids,adUnits,floors,timeout){if(typeof window.ezoResponsiveSizes!=='undefined'&&typeof window.epbjsApplyResponsiveSizes==='function'){for(var i=0;i<adUnits.length;i++){adUnits[i]=window.epbjsApplyResponsiveSizes(adUnits[i]);}}
this.setMinimumBidFloors(adUnits,floors);this.filterNoBiddersByAdUnit(adUnits);this.addhbIds(ids);epbjs.addAdUnits(adUnits)
setTimeout(function(){__ez.fads.adLoadHB.clearAuctionStatus(ids)},timeout+1000);__ez.fads.log('callEpbjsRunAdUnits sending prebid ad unit requests',adUnits);let requestBidsCallback=epbjs.requestBids.bind(this,{timeout:timeout,adUnits:adUnits,bidsBackHandler:function(bidResponses){epbjs.setPAAPIConfigForGPT();},});requestBidsCallback();this.checkPrebidIds();},callEpbjsTrident:function(ids,adUnits,timeout){if(typeof window.ezoResponsiveSizes!=='undefined'&&typeof window.epbjsApplyResponsiveSizes==='function'){for(var i=0;i<adUnits.length;i++){adUnits[i]=window.epbjsApplyResponsiveSizes(adUnits[i]);}}
adUnits=this.setS2SAlias(adUnits);adUnits=this.tridentFloors(adUnits);this.addhbIds(ids);setTimeout(function(){__ez.fads.adLoadHB.clearAuctionStatus(ids)},timeout+1000);__ez.fads.log('callEpbjsRunAdUnits sending prebid ad unit requests',adUnits);let requestBidsCallback=epbjs.requestBids.bind(this,{timeout:timeout,adUnits:adUnits,bidsBackHandler:function(bidResponses){epbjs.setPAAPIConfigForGPT();},});requestBidsCallback();this.checkPrebidIds();},addhbIds:function(ids){for(var i=0;i<ids.length;i++){if(this.hbIds.indexOf(ids[i])==-1){this.hbIds.push(ids[i]);}}},isInHBIds:function(id){return this.hbIds.indexOf(id)!=-1;},RenderAdPoop:function(adId,ssId,posId){if(typeof adId!='undefined'&&adId!=null&&adId!=''){this.bidCache.setRenderDiv(adId);console.log("rendering bid:",adId,this.GetBidByAdId(adId));__ez_hb_render(adId);if(typeof window[this.bangerName]!=="undefined"&&typeof window[this.bangerName].StoreStatSourceByExtId==="function"){window[this.bangerName].StoreStatSourceByExtId(ssId,'hb_adid',adId);}}else{if(posId!=null&&posId!=""&&typeof window[this.bangerName].ReloadFromP=='function'){window[this.bangerName].ReloadFromP(posId);}}},GetBidByAdId:function(adId){for(var i=0;i<epbjs.adUnits.length;i++){var bids=epbjs.getBidResponsesForAdUnitCode(epbjs.adUnits[i].code).bids;for(var j=0;j<bids.length;j++){if(bids[j].adId==adId){return bids[j];}}}},clearAuctionStatus:function(ids){for(var i=0;i<ids.length;i++){this.auctionStatus[ids[i]]=null;}},SetAdBid:function(id){var topBid=this.bidCache.getTopBid(id);if(topBid==null){return;}
this.setBidParams(id,topBid);},setBidParams:function(id,bid){if(typeof bid!='object'||bid==null||typeof bid.adUnitCode=='undefined'){return;}
var bidType=bid.isOpenwrap?'ow':'hb';var bidCPM=(bid.adserverTargeting&&bid.adserverTargeting['epp']!==undefined)?bid.adserverTargeting['epp']:bid.cpm;var ssid=0;if(bidType=='ow'){ssid=bid.ssid;}else{ssid=epbjs.SS[bid.bidder.toLowerCase()]}
var source=(bid.adserverTargeting&&bid.adserverTargeting['epr']!=undefined)?bid.adserverTargeting['epr']:bid.source;var slotId=id;__ez.fads.SetGAMTargeting(slotId,'hb_bidder',bid.bidder);__ez.fads.SetGAMTargeting(slotId,'hb_adid',bid.adId);__ez.fads.SetGAMTargeting(slotId,'hb_format',bid.mediaType);__ez.fads.SetGAMTargeting(slotId,'hb_ssid',ssid);__ez.fads.SetGAMTargeting(slotId,'hb_opt',bidCPM);__ez.fads.SetGAMTargeting(slotId,'hb_rt',source);__ez.fads.SetGAMTargeting(slotId,'hb_bidtype',bidType);if(bidType=='ow'){__ez.fads.SetGAMTargeting(slotId,'pwtsid',bid.bidData.kvp.pwtsid);}},isAuctionComplete:function(id){if(typeof this.auctionStatus[id]=='undefined'){return false;}else{return this.auctionStatus[id]=='complete';}},isAuctionRunning:function(id){if(typeof this.auctionStatus[id]=='undefined'||this.auctionStatus[id]==null){return false;}else{return this.auctionStatus[id]=='running';}},filterNoBiddersByAdUnit:function(adUnits){var noBidsByAdUnitsCache=this.bidCache.noBidsByAdUnits;if(Object.keys(noBidsByAdUnitsCache).length===0)return adUnits;for(var i=0;i<adUnits.length;i++){if(adUnits[i]==null||typeof adUnits[i].code==='undefined'||typeof noBidsByAdUnitsCache[adUnits[i].code]==='undefined')continue;var filteredBids=[];adUnits[i].bids.forEach(bid=>{var isBidderBlockedFromBidding=noBidsByAdUnitsCache[adUnits[i].code].includes(bid.bidder);if(!isBidderBlockedFromBidding){filteredBids.push(bid);}});adUnits[i].bids=filteredBids;}
return adUnits;},setMinimumBidFloors:function(adUnits,floors){var minFloor=0;for(var k in floors){if(floors[k]<minFloor){minFloor=floors[k];}}
for(var i=0;i<adUnits.length;i++){if(adUnits[i]==null)continue;var unitFloor=minFloor;if(typeof floors!=='undefined'&&typeof adUnits[i].code!='undefined'&&typeof floors[adUnits[i].code]!=='undefined'){unitFloor=floors[adUnits[i].code];}
adUnits[i].floors={currency:'USD',skipRate:0,modelVersion:'SuperAwesome',schema:{fields:['mediaType']},values:{'banner':unitFloor}}}
return adUnits;},doesS2SExist:function(bidder){for(var i=0;i<window.__s2sbidders.length;i++){if(window.__s2sbidders[i]==bidder+'_s2s'){return true;}}
return false;},setS2SAlias:function(adUnits){if(window.__s2sbidders.length===0){return adUnits;}
for(var i=0;i<adUnits.length;i++){var adUnit=adUnits[i];if(adUnit==null)continue;var newBids=[];for(var j=0;j<adUnit.bids.length;j++){var bid=adUnit.bids[j];if(this.doesS2SExist(bid.bidder)){var s2sBid=JSON.parse(JSON.stringify(bid));s2sBid.bidder=bid.bidder+'_s2s';newBids.push(s2sBid);}
newBids.push(bid);}
if(newBids.length>0){adUnit.bids=newBids;}}
return adUnits;},tridentFloors:function(adUnits){var newAdUnits=[];for(var i=0;i<adUnits.length;i++){if(adUnits[i]==null)continue;if(typeof adUnits[i].tfl=='undefined'||adUnits[i].tfl==null||adUnits[i].tfl.length==0){newAdUnits.push(adUnits[i]);continue;}
const auctionExclusionsAreDefined=Array.isArray(window.__ezExtraAuctionExcludedBidders)&&window.__ezExtraAuctionExcludedBidders.length>0;for(var j=0;j<adUnits[i].tfl.length;j++){var unit=JSON.parse(JSON.stringify(adUnits[i]));if(auctionExclusionsAreDefined&&adUnits[i].tfl.length===5&&j==2||j==3){unit.bids=unit.bids.filter(bid=>!window.__ezExtraAuctionExcludedBidders.includes(bid.bidder));if(unit.bids.length>0){const floor=adUnits[i].tfl[j];unit=this.setAdapterFloor(unit,floor);unit.floors={currency:'USD',skipRate:0,modelVersion:'MultiFloors',schema:{fields:['mediaType']},values:{'banner':floor}};unit.bidPoolId=unit.bidPoolId+'_mf_'+j;newAdUnits.push(unit);}}else{unit.floors={currency:'USD',skipRate:0,modelVersion:'Trident3',schema:{fields:['mediaType']},values:{'banner':adUnits[i].tfl[j]}};unit.bidPoolId=unit.bidPoolId+'_'+j;unit=this.setAdapterFloor(unit,adUnits[i].tfl[j]);newAdUnits.push(unit);}}}
return newAdUnits;},setAdapterFloor:function(adUnit,floor){for(var b in adUnit.bids){var bid=adUnit.bids[b];if(typeof bid.params=='undefined'){continue;}
var bidder=bid.bidder.replace('_s2s','');switch(bidder){case 'appnexus':bid.params.reserve=floor;break;case 'openx':bid.params.customFloor=floor;break;case 'pubmatic':bid.params.kadfloor=floor.toString();break;case 'sovrn':bid.params.bidfloor=floor;break;case 'ttd':bid.params.bidfloor=floor;break;case 'medianet':bid.params.bidfloor=floor;break;case 'minutemedia':bid.params.floorPrice=floor;break;case 'yieldmo':bid.params.bidFloor=floor;break;case 'smartadserver':bid.params.bidfloor=floor;break;case 'rise':bid.params.floorPrice=floor;break;case 'ix':bid.params.bidFloor=floor;bid.params.bidFloorCur="USD";break;case 'inmobi':bid.params.bidfloor=floor;break;default:bid.params.floor=floor;}
adUnit.bids[b]=bid;}
return adUnit;},setTimeout:function(timeout){if(this.timeoutSet){return;}
this.timeoutSet=true;if(typeof epbjs!=='undefined'&&typeof epbjs.mergeConfig==='function'){epbjs.mergeConfig({bidderTimeout:timeout});}},GetHBAdunitById:function(id){if(typeof epbjs!=='undefined'&&typeof epbjs.adUnits!=='undefined'&&epbjs.adUnits.length>0){var foundUnit=epbjs.adUnits.find(unit=>unit&&unit.code===id);if(typeof foundUnit!=='undefined'&&foundUnit!=null){return foundUnit;}}
return this.GetEZAdunitById(id);},GetEZAdunitById:function(id){if(typeof epbjs!=='undefined'&&typeof epbjs.ezAdUnits!=='undefined'&&epbjs.ezAdUnits.length>0){var foundUnit=epbjs.ezAdUnits.find(unit=>unit&&unit.code===id);if(typeof foundUnit!=='undefined'){return foundUnit;}else{return false;}}
return null;},addPixelData:function(slot,key,name,transform){var value=slot.getTargeting(key)[0];if(typeof value!=='undefined'&&value!==''){if(name==null)name=key;__ez.pel.Add(slot,[new __ezDotData(name,transform?transform(value):value)]);}
return value;},HandleBidWonModifiers:function(bid){if(typeof bid==='undefined'||bid===null||!bid.bidder||bid.bidder.toLowerCase()!=='aidem'){return;}
let slotID=bid.adUnitName;__ez.fads.SetGAMTargeting(slotID,'reft','n');},checkPrebidIds:function(){if(typeof epbjs==='undefined'){return;}
let appliedUIDs=epbjs.getUserIds();idsToPassCheck=['uid2','euid'];let passedCheck=false;for(let i=0;i<idsToPassCheck.length;i++){if(appliedUIDs[idsToPassCheck[i]]){passedCheck=true;break;}}
let isFromEzoic=false;if(typeof window.ezoicIdentity!=='undefined'&&typeof window.ezoicIdentity.getUID==='function'){isFromEzoic=window.ezoicIdentity.getUID()!=null;}
if(passedCheck!=true||__ez.fads.adLoadHB.sentIDPixel===true||!isFromEzoic){return;}
__ez.fads.adLoadHB.sentIDPixel=true;let pvID=window["_ezaq"]["page_view_id"];let pvData=[(new __ezDotData('identity_applied',1))];if(typeof __ez.bit!=="undefined"){__ez.bit.Add(pvID,pvData);}else{window.ez_bit_cmd=window.ez_bit_cmd||[];window.ez_bit_cmd.push(function(){__ez.bit.Add(pvID,pvData);});}
let pvIdData=[(new __ezDotData('identity_applied',1))];if(typeof __ez.bitid!=="undefined"){__ez.bitid.Add(pvIdData);}else{window.ez_bitid_cmd=window.ez_bitid_cmd||[];window.ez_bitid_cmd.push(function(){__ez.bitid.Add(pvIdData);});}},}
var __ez_fad_ezpbinitd=false;function __ez_fad_pb(){if(__ez_fad_ezpbinitd==false&&typeof __ez_fad_ezpbinit=='function')
{__ez_fad_ezpbinit();__ez_fad_ezpbinitd=true;}else if(__ez_fad_ezpbinitd==false)
{setTimeout(function(){__ez_fad_pb()},100);}}Object.assign(__ez.fads.adLoadHB,{processedAuctions:[],preBidEventsSetup:false,winningAdIds:[],featureMap:featureMap={position:{}},hasAdWon:function(adId){return this.winningAdIds.indexOf(adId)>-1;},recordAdWin:function(adId){this.winningAdIds.push(adId);},auctionCompleteHandler:function(auctionEndEvent){let bids=auctionEndEvent.bidsReceived;let auctionId=auctionEndEvent.auctionId;let ids=auctionEndEvent.adUnitCodes;if(this.processedAuctions.indexOf(auctionId)>-1){return;}
this.processedAuctions.push(auctionId);if(ids.length==0){return;}
if(window.PrebidImpressionController){window.PrebidImpressionController.recordAuctionEndImpressions(auctionEndEvent);window.PrebidImpressionController.batchFireAll();}
for(var i=0;i<bids.length;i++){var adUnit=this.GetHBAdunitById(bids[i].adUnitCode);if(typeof adUnit==='undefined'||adUnit===false){continue;}
this.bidCache.cacheBid(adUnit,bids[i]);}
for(var i=0;i<ids.length;i++){var adUnit=this.GetHBAdunitById(ids[i]);if(typeof adUnit!=='undefined'&&adUnit!==false){this.SetBidForId(ids[i]);this.auctionStatus[ids[i]]='complete';}}
if(auctionEndEvent.noBids.length>0){this.bidCache.cacheNoBids(auctionEndEvent.noBids);}
if(auctionEndEvent.bidsReceived.length>0){this.bidCache.removeCacheNoBidsForReceivedBids(auctionEndEvent.bidsReceived);}
__ez.fads.logAdStats(ids,'adloadhb');__ez.fads.AdLoadComplete('adLoadHB',ids);},RecordAuctionEndImpressions:function(bids){if(typeof window.PrebidImpressionController==='undefined'){return;}
window.PrebidImpressionController.batchAuctionEvent(bids);},GetSlotTargetingForAdCode:function(adCode){if(!adCode.startsWith('div-gpt-ad')){return{};}
var slotTargetingMatches=ezslots_raw.filter(s=>s.tap&&s.tap.startsWith(adCode.slice(11,-2)));if(slotTargetingMatches.length===0){return{};}
return slotTargetingMatches[0];},SetBidForId:function(id){var topBid=this.bidCache.getTopBid(id);if(topBid!=null&&typeof topBid.adId!=='undefined'){this.setBidParams(id,topBid);}else{}},AdRenderSuccessHandler:function(bid){if(typeof __ez==='undefined'||typeof __ez.pel==='undefined'||typeof __ezDotData==='undefined'||typeof __ez.pel.Add!=='function'||typeof __ez.bit==='undefined'||typeof __ez.bit.Add!=='function'){setTimeout(function(){__ez.fads.adLoadHB.AdRenderSuccessHandler(bid)},1000);return;}
var slot=__ez.fads.adLoadGAM.GetSlotById(bid.adUnitCode);if(typeof slot==='undefined'||typeof bid.adId==='undefined'){return;}
var last_bid_val=parseInt(slot.getTargeting("br1")[0]);if(typeof window.ezbfcr!=='undefined'){last_bid_val=last_bid_val*window.ezbfcr;}
var ssid=0;var revenue=bid.cpm/1000;var lcBidder="missing";if(typeof bid.bidder!=='undefined'){lcBidder=bid.bidder.toLowerCase();}
if(typeof epbjs.SS[lcBidder]!=='undefined'){ssid=epbjs.SS[lcBidder];__ez.pel.Add(slot,[new __ezDotData('stat_source_id',ssid)],revenue,0,revenue,last_bid_val,ssid);}
__ez.pel.Add(slot,[new __ezDotData('loaded',1)],revenue,0,revenue,last_bid_val,ssid);__ez.bit.Add(window["_ezaq"]["page_view_id"],[new __ezDotData('est_revenue_usd',revenue)]);this.addPixelData(slot,'eb_br','filled_bid_hash',function(v){return v.substring(0,32);});this.addPixelData(slot,'hb_rt','prebid_source');this.addPixelData(slot,'ic','refresh_count',null,function(v){return parseInt(v);});},RenderFailedHandler:function(event){if(typeof event.bid!='undefined'){var bid=event.bid;}else{var bid=this.bidCache.getBidByAdId(event.adId);}
if(typeof bid!='undefined'&&bid!=null){this.bidCache.removeBid(bid);__ez.fads.RefreshAd(bid.adUnitCode,true);}},UpdatePrebidVars:function(bid){var adUnitCode=bid.adUnitCode;var bidder=bid.bidder;epbjs.ezas[adUnitCode]=bid.size;if(bidder==="ehb"){epbjs.ezdss[adUnitCode]=bid.ss;}else{var lowerCaseBidder=bidder.toLowerCase();var matchedBidder=epbjs.SS[lowerCaseBidder]!==undefined?lowerCaseBidder:(epbjs.SS[bidder]!==undefined?bidder:null);if(matchedBidder!==null){epbjs.ezdss[adUnitCode]=epbjs.SS[matchedBidder];if(epbjs.useAdj&&epbjs.bidders.indexOf(bidder)>-1){epbjs.ezobid[adUnitCode]=bid.cpm/epbjs.gadj;}}else{console.error("epbjs: NO MATCHED BIDDER",bidder,epbjs.SS);}}
if(epbjs.ezBidCache!==undefined){epbjs.ezBidCache.clearBidForUnit(adUnitCode,bid.bidderCode);}
this.bidCache.removeBid(bid);},setUpEventListeners:function(){epbjs.onEvent('bidWon',function(bid){if(__ez.fads.adLoadHB.hasAdWon(bid.adId)){return;}
__ez.fads.adLoadHB.recordAdWin(bid.adId);__ez.fads.adLoadHB.log("!!!!!!!!!!!! bidWon event",bid);__ez.fads.adLoadHB.UpdatePrebidVars(bid);__ez.fads.adLoadHB.HandleBidWonModifiers(bid);if(window.PrebidImpressionController){window.PrebidImpressionController.recordAndFireImpressionWonEvent(bid);}});epbjs.onEvent('adRenderSucceeded',function(e){__ez.fads.adLoadHB.log("!!!!!!!!!!!! adRenderSucceeded event",e);__ez.fads.adLoadHB.AdRenderSuccessHandler(e.bid);});epbjs.onEvent('beforeRequestBids',function(event){event.forEach(adunitRequest=>{let adID=adunitRequest.code;let bidderSSIDs=adunitRequest.bids.map(b=>{let lcBidder=b.bidder.toLowerCase();return epbjs.SS[lcBidder];}).filter(ssid=>typeof ssid!=='undefined');if(__ez.fads.adLoadGAM.loaded===false){__ez.fads.SetGAMTargeting(adID,'rbs',bidderSSIDs);return;}
__ez.fads.adLoadGAM.SetTargeting(adID,'rbs',bidderSSIDs);})})
epbjs.onEvent('auctionEnd',function(e,timedOut,acutionId){__ez.fads.adLoadHB.auctionCompleteHandler(e);});epbjs.onEvent('adRenderFailed',function(e){__ez.fads.adLoadHB.RenderFailedHandler(e);});},initFeatureMap:function(){this.featureMap.position={'rubicon':'position',};},});__ez.fads.adLoadHB.bidCache=__ez.fads.adLoadHB.bidCache||{cachedBids:{},noBidsByAdUnits:{},recentlyReleased:{},ttlBuffer:3000,log:__ez.fads.adLoadHB.log,parent:__ez.fads.adLoadHB,log:function(){if(__ez.fads.logEnabled){let args=Array.from(arguments);args.unshift('bidCache::');__ez.fads.adLoadHB.log.apply(__ez.fads.adLoadHB,args);}},cacheBid:function(adUnit,bid){if(!adUnit||!bid){return null;}
bid.ogAdUnitCode=adUnit.code;var key=this.getCacheKey(adUnit);if(bid.mediaType==="video"&&adUnit.mediaTypes&&adUnit.mediaTypes.video){if(bid.vastUrl&&bid.vastXml){delete bid.vastXml;}}
if(bid.bidderCode==='teads'||bid.bidderCode==='aidem'){key=bid.adUnitCode;}
if(bid.bidderCode==='aidem'){key=bid.adUnitCode;bid.ttl=10;}
if(typeof this.cachedBids[key]==='undefined'){this.cachedBids[key]=[];}
this.cachedBids[key].push(bid);},cacheNoBids:function(noBids){var exclusionList=[11309,11314,11313,11321,11315,10061,11290,11335,10087,11294,11316,10097,11328];noBids.forEach(({adUnitCode,bidder,bidderWinsCount,bidderRequestsCount})=>{if(epbjs.SS.hasOwnProperty(bidder)&&exclusionList.includes(epbjs.SS[bidder])){return;}
if(typeof this.noBidsByAdUnits[adUnitCode]==='undefined'){this.noBidsByAdUnits[adUnitCode]=[bidder];}else if(!this.noBidsByAdUnits[adUnitCode].includes(bidder)){this.noBidsByAdUnits[adUnitCode].push(bidder);}});},removeCacheNoBidsForReceivedBids:function(receivedBids){receivedBids.forEach(({adUnitCode,bidder})=>{if(typeof this.noBidsByAdUnits[adUnitCode]==='undefined'){return;}
if(this.noBidsByAdUnits[adUnitCode].includes(bidder)){this.noBidsByAdUnits[adUnitCode]=this.noBidsByAdUnits[adUnitCode].filter(item=>item!==bidder);}});},getBidByAdId:function(adId){for(var key in this.cachedBids){var bids=this.cachedBids[key];for(var i=0;i<bids.length;i++){if(bids[i].adId===adId){return bids[i];}}}
return null;},getBidByHbUUId:function(hbUUID){for(var key in this.cachedBids){var bids=this.cachedBids[key];for(var i=0;i<bids.length;i++){if(bids[i].adserverTargeting&&bids[i].adserverTargeting.hb_uuid===hbUUID){return bids[i];}}}
return null;},getTopBid:function(adUnit){if(typeof adUnit==='string'){adUnit=this.parent.GetHBAdunitById(adUnit);}
if(!adUnit){return null;}
var key=this.getCacheKey(adUnit);this.removeExpiredBids();var bids=this.cachedBids[key];if(typeof bids==='undefined'){return null;}
bids=this.filterBidsAvailableFromCache(adUnit,bids,key);var topBid=null;for(var i=0;i<bids.length;i++){if(this.isBidExpired(bids[i])){continue;}
if(bids[i].reserved&&bids[i].reservedId!==adUnit.code){continue;}
if(!this.isMatchingSize(adUnit,bids[i])){continue;}
if(topBid===null||bids[i].cpm>topBid.cpm){topBid=bids[i];}}
if(topBid!==null){topBid.reserved=true;topBid.reservedId=adUnit.code;topBid.adUnitCode=adUnit.code;}
return topBid;},getBidsForAdUnit:function(adUnit){if(!adUnit){return null;}
var key=this.getCacheKey(adUnit);this.removeExpiredBids();var bids=this.cachedBids[key];if(typeof bids==='undefined'){return null;}
bids=this.filterBidsAvailableFromCache(adUnit,bids,key);bids=bids.filter(bid=>!(this.isBidExpired(bid)&&bid.reserved&&bid.reservedId!==adUnit.code));__ez.fads.adLoadHB.bidCache.log(`returning ${bids.length} bids`);return bids},filterBidsAvailableFromCache:function(adUnit,bids,bidCacheKey){if(bidCacheKey!==adUnit.code&&Array.isArray(this.cachedBids[adUnit.code])){bids=[...bids,...this.cachedBids[adUnit.code]];}
let forcedSoloBidder=new URLSearchParams(window.location.search).get('ez_force_hb_solo');if(forcedSoloBidder){bids=bids.filter(bid=>bid.bidderCode===forcedSoloBidder);}
return bids;},setRenderDiv:function(adid){for(var key in this.cachedBids){var bids=this.cachedBids[key];for(var i=0;i<bids.length;i++){if(bids[i].adId===adid){if(typeof bids[i].reservedId==='undefined'){return null;}
if(bids[i].adUnitCode!=bids[i].reservedId){bids[i].adUnitCode=bids[i].reservedId;}}}}
return null;},releaseBid:function(id){var bid=this.getReservedBidByCode(id);if(bid!=null){this.recentlyReleased[id]=bid;bid.reserved=false;bid.reservedId=null;}},getReservedBidByCode:function(code){for(var key in this.cachedBids){var bids=this.cachedBids[key];for(var i=0;i<bids.length;i++){if(bids[i].reserved&&bids[i].reservedId===code){return bids[i];}}}
return null;},isMatchingSize:function(adUnit,bid){if(bid.width===1&&bid.height===1){return true;}
if(bid.mediaType==='video'&&adUnit.mediaTypes.video){return true;}
if(!adUnit.mediaTypes||!adUnit.mediaTypes[bid.mediaType]){return false;}
var sizes=adUnit.mediaTypes[bid.mediaType].sizes;if(typeof sizes!='undefined'){for(var i=0;i<sizes.length;i++){if(sizes[i][0]===bid.width&&sizes[i][1]===bid.height){return true;}}}
return false;},isBidExpired:function(bid){if(typeof bid.responseTimestamp==='undefined'||typeof bid.ttl==='undefined'){return false;}
return Date.now()>(bid.responseTimestamp+(bid.ttl*1000)-this.ttlBuffer);},removeExpiredBids:function(){for(var key in this.cachedBids){var bids=this.cachedBids[key];for(var i=0;i<bids.length;i++){if(this.isBidExpired(bids[i])){bids.splice(i,1);i--;}}}},removeBidByCode:function(code){var bid=this.getReservedBidByCode(code);if(bid===null){bid=this.recentlyReleased[code];}
if(bid!==null){this.removeBid(bid);}},removeBid:function(bid){for(var key in this.cachedBids){var bids=this.cachedBids[key];for(var i=0;i<bids.length;i++){if(this.bidsMatch(bids[i],bid)){bids.splice(i,1);return true;}}}
return false;},bidsMatch:function(bid1,bid2){if(bid1===null||typeof bid1==='undefined'||bid2===null||typeof bid2==='undefined'){return false;}
return bid1.adId===bid2.adId&&bid1.bidder===bid2.bidder&&bid1.size===bid2.size;},getCacheKey:function(adUnit){return adUnit.bidPoolId||adUnit.code;},outputBidsPretty:function(){var output={};for(var key in this.cachedBids){var bids=this.cachedBids[key];output[key]=[];for(var i=0;i<bids.length;i++){output[key].push({cpm:bids[i].cpm,code:bids[i].adUnitCode,bidder:bids[i].bidder});}}},};} catch(err) {var hREED = function(er) {return function() {reportEzError(er, "/porpoiseant/ezadloadhb.js")}}; typeof reportEzError==="function"?hREED(err):window.addEventListener('reportEzErrorDefined',hREED(err), {once: true}); console.error(err);}