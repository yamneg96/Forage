try { __ez.fads.adFilled=(__ez.fads.adFilled&&__ez.fads.adFilled.loaded===true)?__ez.fads.adFilled:{loaded:true,log:__ez.fads.log,version:__ez.fads.version,filledTimes:{},filledRates:{},filledData:function(id,cpm,retries,refreshCount,ssid,avgcpm,size){if(isNaN(avgcpm)){avgcpm=0;}
if(typeof refreshCount=='undefined'){refreshCount=0;}
if(size[0]=='1'){var el=document.getElementById(id);if(el){var rect=el.getBoundingClientRect();size=[Math.round(rect.width),Math.round(rect.height)];if(size[0]<100||size[1]<50){var ezah=el.getAttribute('ezah');var ezaw=el.getAttribute('ezad');if(ezah&&ezaw){size=[parseInt(ezaw),parseInt(ezah)];}}}}
this.id=id;this.cpm=cpm;this.time=new Date().getTime();this.retries=retries;this.refreshCount=refreshCount;this.ssid=ssid;this.avgcpm=avgcpm/100;this.size=size;},handleMultiAuctionAds:function(id,attempt=1){var baseId=id.replace(/-dynamic-multi-[0-9]+$/,'');var ads=__ez.fads.GetMultiAuctionIds(baseId);var highest=-.01;var highestId=null;var allRates={};for(var i=0;i<ads.length;i++){var adId=ads[i];var rate=this.GetHighestFilledRate(adId);if(rate>highest){highest=rate;highestId=adId;allRates[adId]=rate;}}
if(document.getElementById(highestId)&&document.getElementById(highestId).style){document.getElementById(highestId).style.display='inline-block';}
var idsToRemove=[];for(var i=0;i<ads.length;i++){var adId=ads[i];if(adId!=highestId){idsToRemove.push(adId);}}
for(var i=0;i<idsToRemove.length;i++){__ez.fads.RemoveAd(idsToRemove[i]);}},AdFilled:function(id,event){if(__ez.fads.addedDivs.indexOf(id)==-1&&__ez.fads.divsd.indexOf(id)==-1){return;}
__ez.fads.removeEligibleAdRefresh(id);if(__ez.fads.isFloating(id)){setTimeout(function(){if(!__ez.fads.callLibrary('adFilled','IsFilledInLast',[id,20000])){__ez.fads.RefreshAd(id);}},36000);}else{setTimeout(function(){__ez.fads.addEligibleAdRefresh(id);},20000);}
var size=null
if(typeof event!='undefined'&&typeof event.size!='undefined'){size=event.size;};this.filledTimes[id]=new Date().getTime();if(typeof this.filledRates[id]=='undefined'){this.filledRates[id]=[];}
this.filledRates[id].push(new this.filledData(id,parseInt(this.getGAMKV(id,'br1'))/100,this.getGAMKV(id,'ic'),this.getGAMKV(id,'alc'),__ez.fads.adLoadGAM.GetStatSourceId(id),this.getGAMKV(id,'avc'),size));if(__ez.fads.isMultiAuction(id)){this.handleMultiAuctionAds(id);}
for(var i=0;i<__ez.fads.libraries.length;i++){var name=__ez.fads.libraries[i];if(name=='adFilled'){continue;}
if(typeof __ez.fads[name]!='undefined'&&__ez.fads[name].loaded==true&&typeof __ez.fads[name].adFill=='function'){__ez.fads[name].adFill(id);}}
__ez.fads.adFill(id);},getLastFilledSize:function(id){if(typeof this.filledRates[id]=='undefined'){return null;}
return this.filledRates[id][this.filledRates[id].length-1].size;},IsHighValueFilled:function(id){return this.IsAboveFilled(id,2.0,0.5,5.0,2);},IsAboveFilled:function(id,percentAvg=1.0,minCPM=0.5,overCPM=1.5,retries=2){var rate=this.filledRates[id][this.filledRates[id].length-1];if(rate.cpm>=minCPM&&(rate.retries<=retries||rate.cpm>=rate.avgcpm*percentAvg)){return true;}
if(rate.cpm>=overCPM){return true;}
return false;},getGAMKV:function(id,key){return __ez.fads.adLoadGAM.GetTargeting(id,key)[0];},GetMaxFloor:function(id,percent,minLoads){percent=percent||1.0;minLoads=minLoads||2;var highest=this.GetHighestFilledRate();var count=this.GetTotalFillCount();if(count<minLoads){return false;}
return Math.round(highest*percent);},GetTotalFillCount:function(id){if(id){return typeof this.filledRates[id]!=='undefined'?this.filledRates[id].length:0;}else{return Object.keys(this.filledRates).reduce(function(acc,key){return acc+this.GetTotalFillCount(key);}.bind(this),0);}},GetPageTotals:function(){var total=0;var avgcpm=0;var count=0;var avgcpmTotal=0;Object.keys(this.filledRates).forEach(function(key){this.filledRates[key].forEach(function(rate){avgcpm_adjust=1-(rate.refreshCount*.2);if(avgcpm_adjust<.2){avgcpm_adjust=.2;}
total+=rate.cpm;avgcpm+=rate.cpm-(rate.avgcpm*avgcpm_adjust);avgcpmTotal+=(rate.avgcpm*avgcpm_adjust);count++;});},this);avgcpm=count>0?avgcpm/count:0;avgPercentage=avgcpmTotal>0?total/avgcpmTotal:0;return{total:total,avgcpm:avgcpm,count:count,avgcpmPercentage:avgPercentage};},GetHighestFilledRate:function(id){if(typeof id!=='undefined'){return this.filledRates[id]?Math.max.apply(null,this.filledRates[id].map(function(rate){return rate.cpm;})):0;}else{return Math.max.apply(null,Object.keys(this.filledRates).map(function(key){return this.GetHighestFilledRate(key);},this));}},IsFilledInLast:function(id,duration){if(typeof duration==='undefined'){duration=20000;}
return(typeof this.filledTimes[id]!=='undefined'&&this.filledTimes[id]+duration>new Date().getTime());}}} catch(err) {var hREED = function(er) {return function() {reportEzError(er, "/porpoiseant/ezadfilled.js")}}; typeof reportEzError==="function"?hREED(err):window.addEventListener('reportEzErrorDefined',hREED(err), {once: true}); console.error(err);}