/*! For license information please see EzHeaderBidding.js.LICENSE.txt */
(()=>{var e={633:(e,t,r)=>{var i=r(738).default;function n(){"use strict";e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},d="function"==typeof Symbol?Symbol:{},u=d.iterator||"@@iterator",l=d.asyncIterator||"@@asyncIterator",c=d.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,r){return e[t]=r}}function f(e,t,r,i){var n=t&&t.prototype instanceof g?t:g,o=Object.create(n.prototype),a=new F(i||[]);return s(o,"_invoke",{value:I(e,r,a)}),o}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var v="suspendedStart",m="suspendedYield",b="executing",y="completed",_={};function g(){}function w(){}function B(){}var S={};p(S,u,(function(){return this}));var P=Object.getPrototypeOf,k=P&&P(P(j([])));k&&k!==o&&a.call(k,u)&&(S=k);var z=B.prototype=g.prototype=Object.create(S);function A(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(n,o,s,d){var u=h(e[n],e,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==i(c)&&a.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,s,d)}),(function(e){r("throw",e,s,d)})):t.resolve(c).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,d)}))}d(u.arg)}var n;s(this,"_invoke",{value:function(e,i){function o(){return new t((function(t,n){r(e,i,t,n)}))}return n=n?n.then(o,o):o()}})}function I(e,r,i){var n=v;return function(o,a){if(n===b)throw Error("Generator is already running");if(n===y){if("throw"===o)throw a;return{value:t,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var d=C(s,i);if(d){if(d===_)continue;return d}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===v)throw n=y,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=b;var u=h(e,r,i);if("normal"===u.type){if(n=i.done?y:m,u.arg===_)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=y,i.method="throw",i.arg=u.arg)}}}function C(e,r){var i=r.method,n=e.iterator[i];if(n===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,C(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),_;var o=h(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,_;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function r(){for(;++n<e.length;)if(a.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(i(e)+" is not iterable")}return w.prototype=B,s(z,"constructor",{value:B,configurable:!0}),s(B,"constructor",{value:w,configurable:!0}),w.displayName=p(B,c,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,B):(e.__proto__=B,p(e,c,"GeneratorFunction")),e.prototype=Object.create(z),e},r.awrap=function(e){return{__await:e}},A(O.prototype),p(O.prototype,l,(function(){return this})),r.AsyncIterator=O,r.async=function(e,t,i,n,o){void 0===o&&(o=Promise);var a=new O(f(e,t,i,n),o);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(z),p(z,c,"Generator"),p(z,u,(function(){return this})),p(z,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},r.values=j,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(i,n){return s.type="throw",s.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var d=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(d&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(d){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;T(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:j(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),_}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var i=r(633)();e.exports=i;try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function i(e,r){if(e){if("string"==typeof e)return t(e,r);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,r):void 0}}function n(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(t){var r=function(t){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(r)?r:r+""}function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a(i.key),i)}}function d(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){return function(){try{return e.apply(void 0,arguments)}catch(e){var r=function(e){return function(){reportEzError(e,"header-bidding."+t)}};"function"==typeof reportEzError?r(e):window.addEventListener("reportEzErrorDefined",r(e),{once:!0}),console.error(e)}}}function l(e,t){var r;void 0!==window.__ez&&null!==(r=window.__ez)&&void 0!==r&&null!==(r=r.queue)&&void 0!==r&&r.addFileOnce?window.__ez.queue.addFileOnce(e,t+"?cb=36&gcb=0",!0,[],!0,!1,!1,!0):setTimeout((function(){l(e,t)}),200)}function c(){var e;"undefined"!=typeof __ez&&__ez.fads&&__ez.fads.log&&(e=__ez.fads).log.apply(e,arguments)}var p={AD:"AND",AE:"ARE",AF:"AFG",AG:"ATG",AI:"AIA",AL:"ALB",AM:"ARM",AO:"AGO",AQ:"ATA",AR:"ARG",AS:"ASM",AT:"AUT",AU:"AUS",AW:"ABW",AX:"ALA",AZ:"AZE",BA:"BIH",BB:"BRB",BD:"BGD",BE:"BEL",BF:"BFA",BG:"BGR",BH:"BHR",BI:"BDI",BJ:"BEN",BL:"BLM",BM:"BMU",BN:"BRN",BO:"BOL",BQ:"BES",BR:"BRA",BS:"BHS",BT:"BTN",BV:"BVT",BW:"BWA",BY:"BLR",BZ:"BLZ",CA:"CAN",CC:"CCK",CD:"COD",CF:"CAF",CG:"COG",CH:"CHE",CI:"CIV",CK:"COK",CL:"CHL",CM:"CMR",CN:"CHN",CO:"COL",CR:"CRI",CU:"CUB",CV:"CPV",CW:"CUW",CX:"CXR",CY:"CYP",CZ:"CZE",DE:"DEU",DJ:"DJI",DK:"DNK",DM:"DMA",DO:"DOM",DZ:"DZA",EC:"ECU",EE:"EST",EG:"EGY",EH:"ESH",ER:"ERI",ES:"ESP",ET:"ETH",FI:"FIN",FJ:"FJI",FK:"FLK",FM:"FSM",FO:"FRO",FR:"FRA",GA:"GAB",GB:"GBR",GD:"GRD",GE:"GEO",GF:"GUF",GG:"GGY",GH:"GHA",GI:"GIB",GL:"GRL",GM:"GMB",GN:"GIN",GP:"GLP",GQ:"GNQ",GR:"GRC",GS:"SGS",GT:"GTM",GU:"GUM",GW:"GNB",GY:"GUY",HK:"HKG",HM:"HMD",HN:"HND",HR:"HRV",HT:"HTI",HU:"HUN",ID:"IDN",IE:"IRL",IL:"ISR",IM:"IMN",IN:"IND",IO:"IOT",IQ:"IRQ",IR:"IRN",IS:"ISL",IT:"ITA",JE:"JEY",JM:"JAM",JO:"JOR",JP:"JPN",KE:"KEN",KG:"KGZ",KH:"KHM",KI:"KIR",KM:"COM",KN:"KNA",KP:"PRK",KR:"KOR",KW:"KWT",KY:"CYM",KZ:"KAZ",LA:"LAO",LB:"LBN",LC:"LCA",LI:"LIE",LK:"LKA",LR:"LBR",LS:"LSO",LT:"LTU",LU:"LUX",LV:"LVA",LY:"LBY",MA:"MAR",MC:"MCO",MD:"MDA",ME:"MNE",MF:"MAF",MG:"MDG",MH:"MHL",MK:"MKD",ML:"MLI",MM:"MMR",MN:"MNG",MO:"MAC",MP:"MNP",MQ:"MTQ",MR:"MRT",MS:"MSR",MT:"MLT",MU:"MUS",MV:"MDV",MW:"MWI",MX:"MEX",MY:"MYS",MZ:"MOZ",NA:"NAM",NC:"NCL",NE:"NER",NF:"NFK",NG:"NGA",NI:"NIC",NL:"NLD",NO:"NOR",NP:"NPL",NR:"NRU",NU:"NIU",NZ:"NZL",OM:"OMN",PA:"PAN",PE:"PER",PF:"PYF",PG:"PNG",PH:"PHL",PK:"PAK",PL:"POL",PM:"SPM",PN:"PCN",PR:"PRI",PS:"PSE",PT:"PRT",PW:"PLW",PY:"PRY",QA:"QAT",RE:"REU",RO:"ROU",RS:"SRB",RU:"RUS",RW:"RWA",SA:"SAU",SB:"SLB",SC:"SYC",SD:"SDN",SE:"SWE",SG:"SGP",SH:"SHN",SI:"SVN",SJ:"SJM",SK:"SVK",SL:"SLE",SM:"SMR",SN:"SEN",SO:"SOM",SR:"SUR",SS:"SSD",ST:"STP",SV:"SLV",SX:"SXM",SY:"SYR",SZ:"SWZ",TC:"TCA",TD:"TCD",TF:"ATF",TG:"TGO",TH:"THA",TJ:"TJK",TK:"TKL",TL:"TLS",TM:"TKM",TN:"TUN",TO:"TON",TR:"TUR",TT:"TTO",TV:"TUV",TW:"TWN",TZ:"TZA",UA:"UKR",UG:"UGA",UM:"UMI",US:"USA",UY:"URY",UZ:"UZB",VA:"VAT",VC:"VCT",VE:"VEN",VG:"VGB",VI:"VIR",VN:"VNM",VU:"VUT",WF:"WLF",WS:"WSM",YE:"YEM",YT:"MYT",ZA:"ZAF",ZM:"ZMB",ZW:"ZWE"};function f(e){if(e){var t=e.toUpperCase();return p[t]}}function h(){var e,t="https://pbcache.ezoic.com/cache";return"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("country")&&"true"!==(null===(e=window.__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.PrebidServerEu)&&"US"!=_ezaq.country&&"CA"!=_ezaq.country&&(t="https://prebid.adnxs.com/pbc/v1/cache"),t}const v=function(){var t=[];function r(e){epbjs.que.push((function(){for(var r=epbjs.getConfig().userSync.userIds||[],i=!1,n=0;n<r.length;n++)if(r[n].name===e.name){if(JSON.stringify(r[n])===JSON.stringify(e))return;i=!0,r[n]=e;break}-1===t.indexOf(e.name)&&t.push(e.name),i||r.push(e),epbjs.setConfig({userSync:{userIds:r}})}))}window.ezoicIdentity.queue.push(u((function(){window.ezoicIdentity.onIdentity((function(i){var n,o,a,s;o=!1,"true"===(null===(n=window._ez)||void 0===n||null===(n=n.tf)||void 0===n?void 0:n.disIdm)&&(o=!0),o||(window.ezoicIdentity.isIdentityReady()?((s=window.ezoicIdentity.getProviderId("uid2"))&&r({name:"uid2",params:{uid2Token:s}}),(a=window.ezoicIdentity.getProviderId("euid"))&&r({name:"euid",params:{euidToken:a}}),window.ezoicIdentity.getProviderId("id5")&&r({name:"id5Id",params:{partnerId:457,externalModuleUrl:"https://cdn.id5-sync.com/api/1.0/id5PrebidModule.js"},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}}),function(){if(void 0!==window.__ezLiveRampConsent&&1==window.__ezLiveRampConsent&&"object"==e(window.ats)&&window.ats.envelopeModuleLoaded&&void 0!==window.ezoicIdentity&&"function"==typeof window.ezoicIdentity.getUID){var t=window.ezoicIdentity.getUID();if(t.email){var r=[];["sha256","sha1","md5"].forEach((function(e){t.email[e]&&r.push(t.email[e])})),r.length>0&&window.ats.setAdditionalData({type:"emailHashes",id:r}),t.email.email&&window.ats.setAdditionalData({type:"email",id:t.email.email})}t.phone&&(t.phone.sha256&&window.ats.setAdditionalData({type:"phoneNumberHashes",id:[t.phone.sha256]}),t.phone.phone&&window.ats.setAdditionalData({type:"phoneNumber",id:t.phone.phone}))}}(),"undefined"!=typeof ez__sspDomain&&"undefined"!=typeof ez__uIdHash&&r({name:"pubProvidedId",params:{eids:[{source:ez__sspDomain,uids:[{id:ez__uIdHash,atype:3,ext:{stype:"ppuid"}}]}]}}),epbjs.que.push((function(){0!==t.length&&epbjs.refreshUserIds({submoduleNames:t},(function(){c("IDs setIDs: Updated modules: "+t.join(", ")),t=[],epbjs.registerSignalSources()}))}))):setTimeout((function(){}),50))}))}),"init"))},m=function(){u((function(){"undefined"!=typeof window&&(l("identity","https://go.ezodn.com/detroitchicago/indy.js"),window.ezoicIdentity=window.ezoicIdentity||{},window.ezoicIdentity.queue=window.ezoicIdentity.queue||[],v())}),"modselect")()};void 0!==window.ezptlog&&!0===window.ezptlog&&(window.epbjs=window.epbjs||{},window.epbjs.que=window.epbjs.que||[]);var b=function(){return d((function e(){o(this,e),window.epbjs=window.epbjs||{},epbjs=window.epbjs||{},epbjs.que=epbjs.que||[],epbjs.ezAdUnits=epbjs.ezAdUnits||[],epbjs.ezdss=epbjs.ezdss||[],epbjs.ezas=epbjs.ezas||[],epbjs.ezobid=epbjs.ezobid||[],window.ezoptbid=window.ezoptbid||[],this.videoHBEnabled="undefined"!=typeof __ezInstream||"undefined"!=typeof __ezOutstream}),[{key:"init",value:function(){var e=this;u((function(){m(),e.setUpGlobalFunctions(),e.setUpConfigs(),void 0!==__ez.fads&&1!=__ez.fads.isJIT&&e.setUpEventListeners()}),"EpbjsController.init")()}},{key:"setUpGlobalFunctions",value:function(){window.getSlotForhb=u((function(e){for(var t in window.ezslots)if(window[window.ezslots[t]].getSlotElementId()==e)return window[window.ezslots[t]]}),"getSlotForhb"),window.epbjsRequestAdUnits=u((function(e){if(void 0!==window.ezoResponsiveSizes)for(var t=0;t<e.length;t++)e[t]=window.epbjsApplyResponsiveSizes(e[t]);void 0!==window.ezstandalone?epbjs.que.push(u((function(){for(var t in e){var r=e[t];epbjs.removeAdUnit(r.code);var i=!1;for(var n in epbjs.ezAdUnits)epbjs.ezAdUnits[n].code==r.code&&(epbjs.ezAdUnits[n]=JSON.parse(JSON.stringify(r)),i=!0);i||epbjs.ezAdUnits.push(JSON.parse(JSON.stringify(r)))}epbjs.addAdUnits(e)}),"epbjsRequestAdUnits.1")):epbjs.que.push(u((function(){epbjs.ezAdUnits=JSON.parse(JSON.stringify(e)),epbjs.addAdUnits(e)}),"epbjsRequestAdUnits.2")),epbjsBidRequest(e)}),"epbjsRequestAdUnits"),window.epbjsBidRequest=u((function(e){epbjs.que.push(u((function(){for(var t={},r=0;r<e.length;r++){if(void 0!==epbjs.ezBidCache&&epbjs.ezBidCache.hasBidForAdUnit(e[r].code)){var i=epbjs.ezBidCache.getTopBidEventForAdUnit(e[r].code);null!==i&&(t[e[r].code]={bids:i})}window.setAuctionActive(e[r].code)}t.length>0&&("function"==typeof window.ezosethbbids?window.ezosethbbids(t):window.ezosethbbidsInterval=setInterval((function(e){"function"==typeof ezosethbbids&&ezosethbbids(e)}),130,t)),epbjs.requestBids({adUnits:e,bidsBackHandler:function(e){"function"==typeof window.ezosethbbids?window.ezosethbbids(e):window.ezosethbbidsInterval=setInterval((function(e){"function"==typeof ezosethbbids&&ezosethbbids(e)}),130,e)}})}),"epbjsBidRequest.1"))}),"epbjsBidRequest"),window.epbjsApplyResponsiveSizes=u((function(e){if(void 0===window.ezoResponsiveSizes||void 0===window.ezoResponsiveSizes[e.code])return e;for(var t=!1,r=[],i=0;i<ezoResponsiveSizes[e.code].responsiveSizes.length;i++){var n=ezoResponsiveSizes[e.code].responsiveSizes[i];0===n.minWidth&&0===n.minHeight&&(t=!0);var o=n.sizes;n.altSizes&&(o=o.concat(n.altSizes)),r.push({minViewPort:[n.minWidth,n.minHeight],sizes:o})}return t||(r=[{minViewPort:[0,0],sizes:[]}].concat(r)),e.mediaTypes={banner:{sizeConfig:r}},e}),"epbjsApplyResponsiveSizes"),window.epbjsRefreshSlot=u((function(e){epbjs.que.push(u((function(){window.setAuctionActive(e.getSlotElementId()),epbjs.requestBids({adUnitCodes:[e.getSlotElementId()],bidsBackHandler:function(t){if(epbjs.setPAAPIConfigForGPT(),epbjs.fastLoadAuctionEnd=!0,window.ezosethbbids(t),void 0!==epbjs.ezBidCache){var r=epbjs.ezBidCache.getTopBidEventForAdUnit(e.getSlotElementId());null!==r&&(r.from_cache=!0,window.ezosethbbid(r))}}})}),"epbjsRefreshSlot.1"))}),"epbjsRefreshSlot"),window.setAuctionActive=u((function(e){window.activeAuctions=window.activeAuctions||{},window.activeAuctions[e]=!0}),"setAuctionActive"),window.setAuctionFinished=u((function(e){window.activeAuctions&&delete window.activeAuctions[e],window.isHbFinished=!0}),"setAuctionFinished"),window.isValid256Hash=u((function(e){return null!==e.match(/^[a-fA-F0-9]{64}$/g)}),"isValid256Hash")}},{key:"setUpCriteoUserIds",value:function(e){var t,r,i=this;if("undefined"!=typeof ez__sspDomain){var n;if(null!==(t=window.ezoicIdentity)&&void 0!==t&&t.getUID){if(!(n=window.ezoicIdentity.getUID())&&e&&Date.now()-e<=2e3)return void setTimeout((function(){i.setUpCriteoUserIds(e)}),50)}else if(e&&Date.now()-e<=2e3)return void setTimeout((function(){i.setUpCriteoUserIds(e)}),50);var o=[];null!==(r=n)&&void 0!==r&&null!==(r=r.email)&&void 0!==r&&r.sha256?(o.push({id:n.email.sha256,atype:3,ext:{stype:"hemsha256"}}),n.email.md5&&o.push({id:n.email.md5,atype:3,ext:{stype:"hemmd5"}})):"undefined"!=typeof ez__uIdHash&&o.push({id:ez__uIdHash,atype:1,ext:{stype:"ppuid",persistence:"js"}}),o.length>0&&epbjs.setBidderConfig({bidders:["criteo"],config:{ortb2:{user:{ext:{data:{eids:[{source:ez__sspDomain,uids:o}]}}}}},fledgeEnabled:!0,defaultForSlots:1},!0)}}},{key:"setUpConfigs",value:function(){var e=this;epbjs.que.push(u((function(){var t;1==window.__enableAnalytics&&epbjs.enableAnalytics([{provider:"ga",options:{trackerName:"gatestprebid"}}]),epbjs.enableAnalytics([{provider:"atsAnalytics",options:{pid:"14067"}}]);var r={usp:{cmpApi:"iab",timeout:0}};"function"==typeof window.__gpp&&(r.gpp={cmpApi:"iab",timeout:0}),"function"==typeof window.__tcfapi&&(r.strictStorageEnforcement=!0,r.gdpr={cmpApi:"iab",timeout:12e4,defaultGdprScope:!0});var i={};!0===window.ezhbopt?i.buckets=[{precision:2,min:0,max:300,increment:.01}]:i.buckets=[{precision:2,min:0,max:5,increment:.01},{precision:2,min:5,max:50,increment:.1},{precision:2,min:50,max:120,increment:5}],epbjs.aliasBidder("aol","onedisplay"),epbjs.aliasBidder("aol","onemobile");var o=!1;void 0===window.ezpbCache&&(o=!0);var a=[{name:"criteo"},{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=muno13d&fmt=json"},storage:{type:"cookie",name:"pbjs-unifiedid",expires:60}},{name:"quantcastId"},{name:"amxId",storage:{name:"amxId",type:"html5",expires:1}},{name:"sharedId",params:{},storage:{type:"cookie",name:"_sharedid",expires:365}},{name:"lotamePanoramaId"},{name:"hadronId",params:{partnerId:524}},{name:"33acrossId",params:{pid:"0010b00002MpnPqAAJ"},storage:{name:"33acrossId",type:"html5",expires:90,refreshInSeconds:28800}},{name:"pairId",params:{liveramp:{storageKey:"_lr_pairId"}}}],s={name:"id5Id",params:{partner:457},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}};"undefined"!=typeof ez__id5pd&&(s.params.pd=ez__id5pd),a.push(s);var d={name:"connectId",params:{pixelId:58713}};a.push({name:"identityLink",params:{pid:"14067",notUse3P:!1},storage:{type:"cookie",name:"idl_env",expires:15,refreshInSeconds:1800}}),"undefined"!=typeof ez_yahoo_cid_he&&isValid256Hash(ez_yahoo_cid_he)&&(d.params.he=ez_yahoo_cid_he),a.push(d);var u="";"undefined"!=typeof __sellerid&&(u=__sellerid);var l,p={asi:"ezoic.ai",sid:u,hp:1};l="undefined"!=typeof __allSiteApprovedBidders?__allSiteApprovedBidders:"*";var v={};if("undefined"!=typeof __s2sbidders&&__s2sbidders.length>0||"undefined"!=typeof __s2sinstreambidders&&__s2sinstreambidders.length>0||"undefined"!=typeof __s2soutstreambidders&&__s2soutstreambidders.length>0){var m=[];if("undefined"!=typeof __s2sbidders&&__s2sbidders.length>0&&m.push.apply(m,n(__s2sbidders)),"undefined"!=typeof __s2sinstreambidders&&__s2sinstreambidders.length>0&&m.push.apply(m,n(__s2sinstreambidders)),"undefined"!=typeof __s2soutstreambidders&&__s2soutstreambidders.length>0&&m.push.apply(m,n(__s2soutstreambidders)),v={accountId:"1",bidders:m,enabled:!0,endpoint:"https://pbserver.ezoic.com/openrtb2/auction",syncEndpoint:"https://pbserver.ezoic.com/cookie_sync",extPrebid:{targeting:{pricegranularity:{ranges:[{max:300,increment:.01}]},includewinners:!0,includebidderkeys:!0},cache:{vastxml:{returnCreative:!0},bids:{returnCreative:!0}},aliases:{amx_s2s:"amx",ix_s2s:"ix",inmobi_s2s:"inmobi",medianet_s2s:"medianet",pubmatic_s2s:"pubmatic",sovrn_s2s:"sovrn",openx_s2s:"openx",rubicon_s2s:"rubicon",onetag_s2s:"onetag",sharethrough_s2s:"sharethrough",unruly_s2s:"unruly","33across_i_s2s":"33across",inmobi_i_s2s:"inmobi",medianet_i_s2s:"medianet",onetag_i_s2s:"onetag",openx_i_s2s:"openx",pubmatic_i_s2s:"pubmatic",rubicon_i_s2s:"rubicon",sharethrough_i_s2s:"sharethrough",triplelift_i_s2s:"triplelift",unruly_i_s2s:"unruly",vidoomy_i_s2s:"vidoomy","33across_o_s2s":"33across",inmobi_o_s2s:"inmobi",medianet_o_s2s:"medianet",onetag_o_s2s:"onetag",openx_o_s2s:"openx",pubmatic_o_s2s:"pubmatic",rubicon_o_s2s:"rubicon",sharethrough_o_s2s:"sharethrough",triplelift_o_s2s:"triplelift",unruly_o_s2s:"unruly"}}},"undefined"!=typeof epbjs&&epbjs.SS)for(var b in v.extPrebid.aliases){var y=v.extPrebid.aliases[b];if(epbjs.SS.hasOwnProperty(y)){var _=epbjs.SS[y];epbjs.SS[b]=_}}}var g={};try{var w,B,S,P,k,z,A,O,I,C,x,T,F;g={site:{name:document.title,cattax:6,cat:[],sectioncat:[],pagecat:((null===(w=window._ezaq)||void 0===w?void 0:w.page_iab_categories)||[]).map((function(e){return e.toString()})),page:location.href,ref:document.referrer,keywords:(null===(B=document.querySelector('meta[name="keywords"]'))||void 0===B?void 0:B.content)||""},video:{minbitrate:300,maxbitrate:96e3}},__advertiserRule&&__advertiserRule.length>0&&(g.badv=__advertiserRule),window.__ez&&window.__ez.tf&&"true"==window.__ez.tf.siteIAB&&(g.site.cat=((null===(I=window._ezaq)||void 0===I?void 0:I.site_iab_categories)||[]).map((function(e){return e.toString()}))),null!==(S=window._ezaq)&&void 0!==S&&S.first_party_signals_page_categories&&(g.site.pagecat=((null===(C=window._ezaq)||void 0===C?void 0:C.first_party_signals_page_categories)||[]).split(",").map((function(e){return e.trim()}))),null!==(P=window._ezaq)&&void 0!==P&&P.first_party_signals_domain_categories&&(g.site.cat=((null===(x=window._ezaq)||void 0===x?void 0:x.first_party_signals_domain_categories)||[]).split(",").map((function(e){return e.trim()})),(!g.site.pagecat||g.site.pagecat&&0===g.site.pagecat.length)&&(g.site.pagecat=g.site.cat)),null!==(k=window._ezaq)&&void 0!==k&&k.first_party_signals_keywords&&(g.site.keywords=null===(T=window._ezaq)||void 0===T?void 0:T.first_party_signals_keywords),null!==(z=window._ezaq)&&void 0!==z&&z.ortb_signals_language&&(g.site.content=g.site.content||{},g.site.content.language=null===(F=window._ezaq)||void 0===F?void 0:F.ortb_signals_language);var j="undefined"!=typeof _ezaq?_ezaq.domain:"";if(""!=j&&(g.site.domain=j),g.site.mobile=1,g.site.privacypolicy=1,g.device=g.device||{},g.device.ua=navigator.userAgent,g.device.dnt="1"===navigator.doNotTrack?1:0,g.device.devicetype=2,g.device.js=1,/mobile/i.test(navigator.userAgent)?g.device.devicetype=4:/tablet/i.test(navigator.userAgent)&&(g.device.devicetype=5),null!==(A=window._ezaq)&&void 0!==A&&A.country){var U=window._ezaq,R=U.country,E=U.state,M={country:f(R)||"USA"};if(E){var L=function(e,t){if(e&&t){var r=e.toUpperCase(),i=t.toUpperCase();return"US"===r?i:"".concat(r,"-").concat(i)}}(R,E);L&&(M.region=L)}g.user=g.user||{},g.user.geo=M,g.device=g.device||{},g.device.geo=M}"undefined"!=typeof __ez&&"true"===(null===(O=__ez)||void 0===O||null===(O=O.tf)||void 0===O?void 0:O.iabCategoriesDisabled)&&(g.site.cat=[],g.site.pagecat=[],g.site.keywords="")}catch(e){c("Error setting up ortb2",e)}epbjs.setConfig({gptPreAuction:{enabled:!0,mcmEnabled:!0},minBidCacheTTL:300,eventHistoryTTL:10,criteo:{fastBidVersion:"latest"},bidderTimeout:void 0===epbjs.bidderTimeout||0===epbjs.bidderTimeout?2500:epbjs.bidderTimeout,useBidCache:o,schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[p]}},priceGranularity:i,userSync:{userIds:a,filterSettings:{iframe:{bidders:l,filter:"include"},image:{bidders:l,filter:"include"}},syncDelay:3e3,aliasSyncEnabled:!0,auctionDelay:500,encryptedSignalSources:{sources:[{source:["id5-sync.com","sharedid.org","pubcid.org","uidapi.com","criteo.com"],encrypt:!1}]},topics:{maxTopicCaller:4,bidders:[{bidder:"pubmatic",iframeURL:"https://ads.pubmatic.com/AdServer/js/topics/topics_frame.html",expiry:7},{bidder:"openx",iframeURL:"https://pa.openx.net/topics_frame.html",expiry:7},{bidder:"onetag",iframeURL:"https://onetag-sys.com/static/topicsapi.html",expiry:7}]}},s2sConfig:v,consentManagement:r,bidderSequence:"fixed",enableTIDs:!0,paapi:{enabled:!0,gpt:{autoconfig:!1},defaultForSlots:1},disableAjaxTimeout:!0,ortb2:g});var D=h(),V=3e3;void 0!==(null===(t=__ez)||void 0===t||null===(t=t.tf)||void 0===t?void 0:t.vacbc)&&"true"===__ez.tf.vacbc?(epbjs.setConfig({cache:{useLocal:!0}}),c("Video A/B test active: disabling Prebid external cache URL")):("undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("country")&&"US"!=_ezaq.country&&"CA"!=_ezaq.country&&(V=6e3),epbjs.setConfig({cache:{url:D,ignoreBidderCacheKey:!0,timeout:V},rubicon:{disableFloors:!0}})),void 0!==__allBidders.find((function(e){return"yahoossp"===e.bidder}))&&epbjs.setConfig({yahoossp:{mode:"all"}}),e.setUpCriteoUserIds(Date.now()),epbjs.bidderSettings=epbjs.bidderSettings||{},epbjs.bidderSettings.standard={adserverTargeting:[{key:"epb",val:function(e){return e.bidderCode}},{key:"epa",val:function(e){return e.adId}},{key:"epp",val:function(e){return e.pbCg}},{key:"epf",val:function(e){return e.mediaType}},{key:"eps",val:function(e){var t=e.bidder;if("ehb"==e.bidder)return 0;if(void 0!==epbjs.SS[t.toLowerCase()])return epbjs.SS[t.toLowerCase()];if(void 0!==epbjs.SS[t.toLowerCase()])return epbjs.SS[t.toLowerCase()];if("video"!==e.mediaType)return console.error("epbjs: NO MATCH",e.bidder,epbjs.SS),0;var r={};return"undefined"!=typeof __ezInstream&&__ezInstream.hasOwnProperty("prebidBidders")&&__ezInstream.prebidBidders.map((function(e){void 0!==e.ssid&&(r[e.bidder]=parseInt(e.ssid))})),"undefined"!=typeof __ezOutstream&&__ezOutstream.hasOwnProperty("prebidBidders")&&__ezOutstream.prebidBidders.map((function(e){void 0!==e.ssid&&(r[e.bidder]=parseInt(e.ssid))})),r.hasOwnProperty(e.bidder)?r[e.bidder]:void 0}},{key:"epr",val:function(e){return e.source}}],storageAllowed:!0}}),"setUpConfigs"))}},{key:"getAllVideoProviders",value:function(){var e=[];return videojs&&videojs.getAllPlayers().forEach((function(t){var r={divId:t.id_,vendorCode:2,playerConfig:{params:{adPluginConfig:{numRedirects:10},vendorConfig:{controls:!1,autoplay:!0,preload:"auto"}}}};e.push(r)})),e}},{key:"setUpEventListeners",value:function(){epbjs.que.push((function(){epbjs.onEvent("bidWon",(function(t){var r=getSlotForhb(t.adUnitCode);if("true"==new URL(window.location.href).searchParams.get("ez_hb_fill_debug")){console.log("[EZ_HB_FILL_DEBUG]:",t.adUnitCode,"\nAd Network:",t.bidder,"\nPlaceholder ID:",parseInt(r.getTargeting("ap")[0])%1e3,"\nSize:",t.size,"\nAdvertiser Info:",t.meta,"\nRequest params:",t.params,"\nSource:",t.source,"\nFull bid info:",t);var i=document.createElement("h4");i.innerText="Ad Network: "+t.bidder+" "+t.source,i.style="color:black;background-color:white;border:solid green;";var n=document.getElementById(t.adUnitCode);null!=n&&n.children.length>0&&n.children[0].insertAdjacentElement("afterbegin",i)}var o=r.getTargeting("ic")[0];if(void 0!==o){var a=parseInt(o);isNaN(a)||__ez.pel.Add(r,[new __ezDotData("refresh_count",a)])}var s=r.getTargeting("eb_br")[0];void 0!==s&&__ez.pel.Add(r,[new __ezDotData("filled_bid_hash",s)]);var d=0;void 0!==r.getTargeting("lb")[0]&&(d=parseInt(r.getTargeting("lb")[0])/1e5);var u=t.bidder.toLowerCase(),l=0;void 0!==epbjs.SS[u]&&(l=epbjs.SS[u],__ez.pel.Add(r,[new __ezDotData("stat_source_id",l)],t.cpm/1e3,0,t.cpm/1e3,d,l));var c=r.getTargeting("hb_rt");if(void 0!==e(c)&&c.length>0&&""!==String(c[0])){var p=String(c[0]);__ez.pel.Add(r,[new __ezDotData("prebid_source",p)])}var f=t.cpm/1e3;__ez.pel.Add(r,[new __ezDotData("loaded",1)],f,0,f,d,l),__ez.bit.Add(window._ezaq.page_view_id,[new __ezDotData("est_revenue_usd",f)])})),epbjs.onEvent("bidResponse",(function(t){if("object"==e(epbjs.bidderSettings)&&t.bidder in epbjs.bidderSettings&&"function"==typeof epbjs.bidderSettings[t.bidder].bidCpmAdjustment){var r=Math.floor(100*epbjs.bidderSettings[t.bidder].bidCpmAdjustment(t.cpm,t))/100;void 0===r||isNaN(r)||(t.cpm=r,t.pbCg=r,t.adserverTargeting.epp=r)}if(void 0!==epbjs.ezBidCache){epbjs.ezBidCache.setHigherBidForAdUnit(t);var i=epbjs.ezBidCache.getTopBidEventForAdUnit(t.adUnitCode);null!==i&&(t=i)}window.ezosethbbid(t)})),epbjs.onEvent("auctionEnd",(function(e){var t,r=function(r){window.setAuctionFinished(e.adUnitCodes[r]),void 0!==window.nbabt&&!0===window.nbabt&&(t=window.ezslots.filter((function(t){return window[t].getSlotElementId()===e.adUnitCodes[r]}))).length>0&&""!=window[t[0]].getTargeting("hb_opt")[0]&&window.adjustHbValues&&window.adjustHbValues(window[t[0]])};for(var i in e.adUnitCodes)r(i);window.PrebidImpressionController&&(window.PrebidImpressionController.recordAuctionEndImpressions(e),window.PrebidImpressionController.batchFireAll())})),epbjs.onEvent("bidWon",(function(e){window.triggerPbjsAdWin(e),window.PrebidImpressionController&&window.PrebidImpressionController.recordAndFireImpressionWonEvent(e)})),window.triggerPbjsAdWin=function(e){var t=e.bidder;epbjs.ezas[e.adUnitCode]=e.size,"ehb"==t?epbjs.ezdss[e.adUnitCode]=e.ss:void 0!==epbjs.SS[t.toLowerCase()]?(epbjs.ezdss[e.adUnitCode]=epbjs.SS[t.toLowerCase()],1==epbjs.useAdj&&epbjs.bidders.indexOf(e.bidder)>-1&&(epbjs.ezobid[e.adUnitCode]=e.cpm/epbjs.gadj)):void 0!==epbjs.SS[t.toLowerCase()]?(epbjs.ezdss[e.adUnitCode]=epbjs.SS[t.toLowerCase()],1==epbjs.useAdj&&epbjs.bidders.indexOf(t.toLowerCase())>-1&&(epbjs.ezobid[e.adUnitCode]=e.cpm/epbjs.gadj)):console.error("epbjs: NO MATCH",e.bidder,epbjs.SS),void 0!==epbjs.ezBidCache&&epbjs.ezBidCache.clearBidForUnit(e.adUnitCode,e.bidderCode)}}))}}])}();const y=b;function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],d=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;d=!1}else for(;!(d=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);d=!0);}catch(e){u=!0,n=e}finally{try{if(!d&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return s}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t,r,i,n,o,a){try{var s=e[o](a),d=s.value}catch(e){return void r(e)}s.done?t(d):Promise.resolve(d).then(i,n)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function a(e){g(o,i,n,a,s,"next",e)}function s(e){g(o,i,n,a,s,"throw",e)}a(void 0)}))}}function B(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=r(756),P=r.n(S),k=12e4,z={epb:"hb_bidder",epa:"hb_adid",epp:"hb_pb",epf:"hb_format",eps:"hb_ssid"},A="prebid",O="aps",I="https://vastproxy.ezoic.net",C={UNIFORM:"uniform",EXPONENTIAL:"exponential",GEOMETRIC:"geometric",HIGH_END:"highEnd",LOW_END:"lowEnd",HISTORICAL:"historical",HISTORICAL_BIDDER:"historicalBidder"};function x(e,t,r){return new Promise((function(i,n){var o=function(){window.hasOwnProperty(e)&&(clearTimeout(a),clearInterval(s),i(window[e]))},a=setTimeout((function(){n("Variable not found.")}),t),s=setInterval(o,r);o()}))}function T(){if(F()){var e=Array.from(arguments);e.unshift("[Video HB]"),console.log.apply(console,e)}}function F(){return"1"===new URLSearchParams(window.location.search).get("ez_vhb_debug")}function j(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?window.__ezOutstream:window.__ezInstream;return void 0!==e&&void 0!==e.monetizationApproval&&e.monetizationApproval.MCMApproved}function U(t,r){if(r&&("object"==e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}var L=function(){return d((function e(t){o(this,e),this.bidderName=t}),[{key:"applyBidParams",value:function(e,t){return e}},{key:"applyAdUnitParams",value:function(e,t){return e}},{key:"applyAbTestParams",value:function(e,t){var r,i;if(e.bidder.includes("ttd"))return e;var n,o,a=t.isOutstream,s=t.player;return"true"===(null===(r=__ez)||void 0===r||null===(r=r.tf)||void 0===r?void 0:r.vappp)&&!a&&null!=s&&s.isCurrentlyFloating()&&3===(null===(n=e.params)||void 0===n||null===(n=n.video)||void 0===n?void 0:n.pos)&&(e.params.video.pos=2),"1"===(null===(i=__ez)||void 0===i||null===(i=i.tf)||void 0===i?void 0:i.vappp)&&(null==e||null===(o=e.params)||void 0===o||null===(o=o.video)||void 0===o?void 0:o.pos)>1&&(e.params.video.pos=1),e}},{key:"convertPlcmtToPlacement",value:function(e){return 1==e||2==e?1:5}},{key:"getBidFloor",value:function(e){return 0}}])}();function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}var V=function(e){function t(){return o(this,t),e=this,i=["33across"],r=R(r=t),U(e,D()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r,i=t.isOutstream,n=t.prebidParams;return i&&"instream"===(null===(r=e.params)||void 0===r?void 0:r.productId)&&4===(null==n?void 0:n.plcmt)&&(e.params.productId="siab"),e}}])}(L);function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N=function(){return!!e})()}var H=function(e){function t(){return o(this,t),e=this,i=["adtelligent"],r=R(r=t),U(e,N()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t)}(L);function G(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(G=function(){return!!e})()}var q=function(e){function t(){return o(this,t),e=this,i=["amx"],r=R(r=t),U(e,G()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t)}(L);function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}var K=function(e){function t(){return o(this,t),e=this,i=["appnexus"],r=R(r=t),U(e,W()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"getContextParamValue",value:function(e,t){if(t)return"outstream";switch(e){case"start":return"pre_roll";case"end":return"post_roll";default:return"mid_roll"}}},{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream,o=t.minDur,a=t.maxDur,s=t.skippable,d=t.timeOffset,u=this.getContextParamValue(d,n);return r&&(e.params.reserve=i),e.params.video||(e.params.video={}),e.params.video.context=u,e.params.video.playback_method="auto_play_sound_off",e.params.video.protocols=[2,6],e.params.video.minduration=o,e.params.video.maxduration=a,e.params.video.skippable=s,e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.reserve)||0}}])}(L);function J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J=function(){return!!e})()}var Y=function(e){function t(){return o(this,t),e=this,i=["compass"],r=R(r=t),U(e,J()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t)}(L);function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($=function(){return!!e})()}var Q=function(e){function t(){return o(this,t),e=this,i=["criteo"],r=R(r=t),U(e,$()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.prebidParams,i=t.shouldSendBidFloor,n=t.floorVal;return i&&n>0&&(e.params.bidFloor=n,e.params.bidFloorCur="USD"),e.params.video=X(X({},JSON.parse(JSON.stringify(r))),{},{placement:this.convertPlcmtToPlacement(r.plcmt)}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}}])}(L);function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ee=function(){return!!e})()}var te=function(e){function t(){return o(this,t),e=this,i=["eplanning"],r=R(r=t),U(e,ee()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t)}(L);function re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(re=function(){return!!e})()}var ie=function(e){function t(){return o(this,t),e=this,i=["insticator"],r=R(r=t),U(e,re()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&(e.params.floor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}}])}(L);function ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ne=function(){return!!e})()}var oe=function(e){function t(){return o(this,t),e=this,i=["insticator"],r=R(r=t),U(e,ne()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&(e.params.floor=i),e.params.publisherId||(e.params.publisherId="ezoic"),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}}])}(L);function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(se=function(){return!!e})()}var de=function(e){function t(){return o(this,t),e=this,i=["ix"],r=R(r=t),U(e,se()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.prebidParams;return e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},JSON.parse(JSON.stringify(r))),Array.isArray(e.params.video.api)&&(e.params.video.api=[2]),e}}])}(L);function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(le=function(){return!!e})()}var ce=function(e){function t(){return o(this,t),e=this,i=["medianet"],r=R(r=t),U(e,le()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams;return r&&(e.params.bidfloor=i),e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},JSON.parse(JSON.stringify(n))),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}}])}(L);function pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pe=function(){return!!e})()}var fe=function(e){function t(){return o(this,t),e=this,i=["minutemedia"],r=R(r=t),U(e,pe()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&(e.params.floorPrice=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floorPrice)||0}}])}(L);function he(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(he=function(){return!!e})()}var ve=function(e){function t(){return o(this,t),e=this,i=["nobid"],r=R(r=t),U(e,he()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.minDur,i=t.maxDur,n=t.prebidParams,o=t.skippable;return e.params.video={minduration:r,maxduration:i,mimes:n.mimes,skippable:o},e}}])}(L);function me(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(me=function(){return!!e})()}var be=function(e){function t(){return o(this,t),e=this,i=["onetag"],r=R(r=t),U(e,me()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t)}(L);function ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ye=function(){return!!e})()}var _e=function(e){function t(){return o(this,t),e=this,i=["openx"],r=R(r=t),U(e,ye()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&(e.params.customFloor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.customFloor)||0}}])}(L);function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Be(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Be=function(){return!!e})()}var Se=function(e){function t(){return o(this,t),e=this,i=["pubmatic"],r=R(r=t),U(e,Be()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r,i=t.shouldSendBidFloor,n=t.floorVal,o=t.prebidParams,a=t.isOutstream;return i&&n>0&&"undefined"!=typeof __ez&&"true"===(null===(r=__ez)||void 0===r||null===(r=r.tf)||void 0===r?void 0:r.vasfs)&&(e.params.kadfloor=n.toString()),a&&(e.renderer={url:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",render:function(e){},backupOnly:!0}),e.params.video=we(we({},JSON.parse(JSON.stringify(o))),{},{placement:this.convertPlcmtToPlacement(o.plcmt)}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.kadfloor)||0}}])}(L);function Pe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pe=function(){return!!e})()}var ke=function(e){function t(){return o(this,t),e=this,i=["pulsepoint"],r=R(r=t),U(e,Pe()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&(e.params.bidfloor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}}])}(L);function ze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ze=function(){return!!e})()}var Ae=function(e){function t(){return o(this,t),e=this,i=["rise"],r=R(r=t),U(e,ze()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&(e.params.floorPrice=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floorPrice)||0}}])}(L);function Oe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Oe=function(){return!!e})()}var Ie=function(e){function t(){return o(this,t),e=this,i=["rubicon"],r=R(r=t),U(e,Oe()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.isOutstream,i=t.language;return t.skippable,t.shouldSendBidFloor,r?e.params.video={playerWidth:400,playerHeight:300}:(e.params.video||(e.params.video={}),i&&(e.params.video.language=i),e.params.video.playerWidth=640,e.params.video.playerHeight=480),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}}])}(L);function Ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ce=function(){return!!e})()}var xe=function(e){function t(){return o(this,t),e=this,i=["rubicon"],r=R(r=t),U(e,Ce()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.isOutstream,i=t.language,n=t.skippable;return t.shouldSendBidFloor,r?e.params.video={playerWidth:400,playerHeight:300,size_id:203}:(e.params.video||(e.params.video={}),i&&(e.params.video.language=i),e.params.video.playerWidth=640,e.params.video.playerHeight=480,e.params.video.size_id=201,e.params.video.skip=n?1:0,n&&(e.params.video.skipdelay=5)),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}}])}(L);function Te(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Te=function(){return!!e})()}var Fe=function(e){function t(){return o(this,t),e=this,i=["sharethrough"],r=R(r=t),U(e,Te()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&(e.params.floor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}}])}(L);function je(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(je=function(){return!!e})()}var Ue=function(e){function t(){return o(this,t),e=this,i=["smaato"],r=R(r=t),U(e,je()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t)}(L);function Re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Re=function(){return!!e})()}var Ee=function(e){function t(){return o(this,t),e=this,i=["smartadserver"],r=R(r=t),U(e,Re()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream,o=t.timeOffset;return r&&(e.params.bidfloor=i),n||(e.params.video={protocol:8,startDelay:this.getStartDelayIntFromTimeOffset(o)}),e}},{key:"getStartDelayIntFromTimeOffset",value:function(e){switch(e){case"start":return 1;case"end":return 3;default:return 2}}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}}])}(L);function Me(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Me=function(){return!!e})()}var Le=function(e){function t(){return o(this,t),e=this,i=["sonobi"],r=R(r=t),U(e,Me()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&(e.params.floor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}}])}(L);function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ne=function(){return!!e})()}var He=function(e){function t(){return o(this,t),e=this,i=["sovrn"],r=R(r=t),U(e,Ne()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams;return r&&(e.params.bidfloor=i),e.params.video=Ve(Ve({},JSON.parse(JSON.stringify(n))),{},{placement:this.convertPlcmtToPlacement(n.placement)}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}}])}(L);function Ge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ge=function(){return!!e})()}var qe=function(e){function t(){return o(this,t),e=this,i=["triplelift"],r=R(r=t),U(e,Ge()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams;return r&&i>0&&(e.params.floor=i),n&&1!==n.plcmt&&(e.params||(e.params={}),e.params.inventoryCode="ezoic_RON_outstream"),e.params||(e.params={}),e.params.video||(e.params.video={}),e.params.video.placement=this.convertPlcmtToPlacement(n.plcmt),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}}])}(L);function We(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(We=function(){return!!e})()}var Ke=function(e){function t(){return o(this,t),e=this,i=["triplelift"],r=R(r=t),U(e,We()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams;return r&&i>0&&(e.params.floor=i),n&&1!==n.plcmt&&(e.params.inventoryCode="ezoic_RON_outstream_PbS2S"),e.params||(e.params={}),e.params.video||(e.params.video={}),e.params.video.placement=this.convertPlcmtToPlacement(n.plcmt),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}}])}(L);function Je(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Je=function(){return!!e})()}var Ye=function(e){function t(){return o(this,t),e=this,i=["unruly"],r=R(r=t),U(e,Je()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.isOutstream;return r&&(e.params.floor=i),e.params.siteId=parseInt(e.params.siteId,10),e.params.siteid&&(e.params.siteId=parseInt(e.params.siteid,10),delete e.params.siteid),n&&(e.params.featureOverrides={canRunUnmissable:!0}),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.floor)||0}}])}(L);function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xe=function(){return!!e})()}var $e=function(e){function t(){return o(this,t),e=this,i=["vidazoo"],r=R(r=t),U(e,Xe()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams,o=t.playerWidth,a=t.playerHeight;r&&"number"==typeof i&&(e.params.bidFloor=i);var s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({sizes:[[o||400,a||300]]},n);return e.params.ext={customParameters:{mediaTypes:{video:s}}},e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}}])}(L);function Qe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qe=function(){return!!e})()}var et=function(e){function t(){return o(this,t),e=this,i=["vidoomy"],r=R(r=t),U(e,Qe()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&(e.params.bidfloor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}}])}(L);function tt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(tt=function(){return!!e})()}var rt=function(e){function t(){return o(this,t),e=this,i=["viewdeosDX"],r=R(r=t),U(e,tt()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r,i=t.isOutstream,n=t.prebidParams;return i&&(e.params.outstream={type:(null==n?void 0:n.type)||"inbanner",audio_setting:(null==n?void 0:n.audio_setting)||"muted",video_controls:(null==n?void 0:n.video_controls)||"show",close_button_options:(null==n?void 0:n.close_button_options)||"delay",view_out_action:(null==n?void 0:n.view_out_action)||"pause",default_volume:(null==n?void 0:n.default_volume)||50,percent_visible_before_show:(null==n?void 0:n.percent_visible_before_show)||50,is_countdown_show:null!==(r=null==n?void 0:n.is_countdown_show)&&void 0!==r?r:1,countdown_time:(null==n?void 0:n.countdown_time)||5,close_button_delay:(null==n?void 0:n.close_button_delay)||5,detach_width:(null==n?void 0:n.detach_width)||300,detach_height:(null==n?void 0:n.detach_height)||250}),e}}])}(L);function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nt=function(){return!!e})()}var ot=function(e){function t(){return o(this,t),e=this,i=["yieldmo"],r=R(r=t),U(e,nt()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal,n=t.prebidParams;return r&&(e.params.bidFloor=i),e.params.video=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},JSON.parse(JSON.stringify(n))),Array.isArray(e.params.video.api)?e.params.video.api=e.params.video.api.filter((function(e){return e>=1&&e<=6})):e.params.video.api=[2],e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidFloor)||0}}])}(L);function at(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(at=function(){return!!e})()}var st=function(e){function t(){return o(this,t),e=this,i=["ttd"],r=R(r=t),U(e,at()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){var r=t.shouldSendBidFloor,i=t.floorVal;return r&&i>0&&(e.params.bidfloor=i),e}},{key:"getBidFloor",value:function(e){var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.bidfloor)||0}}])}(L);function dt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dt=function(){return!!e})()}var ut=function(e){function t(){return o(this,t),e=this,i=["noop"],r=R(r=t),U(e,dt()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"applyBidParams",value:function(e,t){return e}},{key:"applyAdUnitParams",value:function(e,t){return e}},{key:"getBidFloor",value:function(e){return 0}}])}(L),lt=function(){function e(){o(this,e)}return d(e,null,[{key:"getStrategy",value:function(t){var r,i=null!==(r=function(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}(e,this,ct)._.get(t))&&void 0!==r?r:ut;return new i}}])}(),ct={_:new Map([["33across",V],["33across_i_s2s",V],["33across_o_s2s",V],["adtelligent",H],["amx",q],["appnexus",K],["compass",Y],["criteo",Q],["eplanning",te],["insticator",ie],["insticator_i_s2s",oe],["insticator_o_s2s",oe],["ix",de],["ix_i_s2s",de],["ix_o_s2s",de],["medianet",ce],["medianet_i_s2s",ce],["medianet_o_s2s",ce],["minutemedia",fe],["nobid",ve],["onetag",be],["onetag_i_s2s",be],["onetag_o_s2s",be],["openx",_e],["openx_i_s2s",_e],["openx_o_s2s",_e],["pubmatic",Se],["pubmatic_i_s2s",Se],["pubmatic_o_s2s",Se],["pulsepoint",ke],["rise",Ae],["rubicon",Ie],["rubicon_i_s2s",xe],["rubicon_o_s2s",xe],["sharethrough",Fe],["sharethrough_i_s2s",Fe],["sharethrough_o_s2s",Fe],["smaato",Ue],["smartadserver",Ee],["sonobi",Le],["sovrn",He],["triplelift",qe],["triplelift_i_s2s",Ke],["triplelift_o_s2s",Ke],["unruly",Ye],["unruly_i_s2s",Ye],["unruly_o_s2s",Ye],["vidazoo",$e],["vidoomy",et],["vidoomy_i_s2s",et],["vidoomy_o_s2s",et],["viewdeosDX",rt],["yieldmo",ot],["ttd",st]])},pt=function(){return d((function e(){o(this,e)}),[{key:"calculate",value:function(e,t,r){throw new Error("calculate method must be implemented")}}])}();function ft(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ft=function(){return!!e})()}var ht=function(e){function t(){return o(this,t),e=this,i=arguments,r=R(r=t),U(e,ft()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"calculate",value:function(e,t,r){return e/Math.pow(2,(t-1)/2)*Math.pow(2,r)}}])}(pt);function vt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vt=function(){return!!e})()}var mt=function(e){function t(){return o(this,t),e=this,i=arguments,r=R(r=t),U(e,vt()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"calculate",value:function(e,t,r){var i=Math.floor(t/2);return e/Math.pow(1.5,i)*Math.pow(1.5,r)}}])}(pt);function bt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bt=function(){return!!e})()}var yt=function(e){function t(){return o(this,t),e=this,i=arguments,r=R(r=t),U(e,bt()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"calculate",value:function(e,t,r){if(t<=1)return e;var i=.5*e;return i+(3*e-i)*Math.pow(r/(t-1),.5)}}])}(pt);function _t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_t=function(){return!!e})()}var gt=function(e){function t(){return o(this,t),e=this,i=arguments,r=R(r=t),U(e,_t()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"calculate",value:function(e,t,r){if(t<=1)return e;var i=.5*e;return i+(3*e-i)*Math.pow(r/(t-1),2)}}])}(pt);function wt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wt=function(){return!!e})()}var Bt=function(e){function t(){return o(this,t),e=this,i=arguments,r=R(r=t),U(e,wt()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"calculate",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i.bidHistory,o=i.bidder,a=i.strategyName;if(!n||0===Object.keys(n).length)return e;var s=36e5,d=Date.now();if(o&&n[o]&&a===C.HISTORICAL_BIDDER)return this.calculateBidderSpecificFloor(o,n[o],e,t,r,d,s);var u=0,l=0;Object.values(n).forEach((function(e){e.bids.forEach((function(e){if(d-e.timestamp<=s){var t=e.wasWinner?2:1;l+=e.cpm*t,u+=t}}))}));var c=u>0?l/u:e,p=Math.floor(t/2);if(r===p)return c;var f=1.5*c/(t-1);return Math.max(.5*c,c+(r-p)*f)}},{key:"calculateBidderSpecificFloor",value:function(e,t,r,i,n,o,a){var s=0,d=0,u=0,l=t.bids.filter((function(e){return o-e.timestamp<=a}));if(0===l.length)return r;l.forEach((function(e){var t=e.wasWinner?2:1;d+=e.cpm*t,s+=t,e.wasWinner&&u++}));var c,p=d/s;c=(u/=l.length)>.7?.9*p:u>.3?.75*p:.6*p,c=Math.max(.8*r,c);var f=Math.floor(i/2);if(n===f)return c;var h=1.5*c/(i-1);return Math.max(.5*c,c+(n-f)*h)}}])}(pt);function St(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(St=function(){return!!e})()}var Pt=function(e){function t(){return o(this,t),e=this,i=arguments,r=R(r=t),U(e,St()?Reflect.construct(r,i||[],R(e).constructor):r.apply(e,i));var e,r,i}return M(t,e),d(t,[{key:"calculate",value:function(e,t,r){if(t<=1)return e;var i=(t-1)/2;return e+e/i*(r-i)}}])}(pt);function kt(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var zt=function(){function e(){o(this,e)}return d(e,null,[{key:"getStrategy",value:function(t){return kt(e,this,At)._[t]||new Pt}},{key:"hasStrategy",value:function(t){return t in kt(e,this,At)._}}])}(),At={_:B(B(B(B(B(B(B({},C.UNIFORM,new Pt),C.EXPONENTIAL,new ht),C.GEOMETRIC,new mt),C.HIGH_END,new yt),C.LOW_END,new gt),C.HISTORICAL,new Bt),C.HISTORICAL_BIDDER,new Bt)};function Ot(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var It=new WeakSet;function Ct(e){if(null!==e&&"undefined"!==e&&void 0!==e){if(void 0!==e.cpm&&e.cpm>this.maxHBBid)return e.cpm;if(void 0!==e.originalCpm&&e.originalCpm>this.maxHBBid)return e.originalCpm}return this.maxHBBid>0?this.maxHBBid:0}function xt(e){var t=window.epbjs;if(!t||!t.markWinningBidAsUsed||!t.adServers)return this.vastURL;if(e.adserverTargeting){if(e.adserverTargeting.hasOwnProperty("epp")&&(e.adserverTargeting.epp=function(e){var t,r=e;return r>300&&(r=300),arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?((r=r<=0?0:r<=1?10*Math.floor(10*r+.5):r<=3?20*Math.floor(100*r/20+.5):r<=10?50*Math.floor(100*r/50+.5):r<=30?100*Math.floor(100*r/100+.5):r<=50?200*Math.floor(100*r/200+.5):r<=120?500*Math.floor(100*r/500+.5):1e3*Math.floor(100*r/1e3+.5))/100>e&&r>2&&(r-=r<=100?10:r<=300?20:r<=1e3?50:r<=3e3?100:r<=5e3?200:r<=12e3?500:1e3),(r/100).toFixed(2)):(r>=0&&r<=5?t=Math.floor(100*r)/100:r>5&&r<=50?t=Math.floor(10*r)/10:r>50&&r<=110?t=5*Math.floor(r/5):r>110&&r<=300&&(t=10*Math.floor(r/10)),t.toFixed(2))}(e.adserverTargeting.epp,this.isOutstream?__ezOutstream.IsEzDfpAccount:__ezInstream.IsEzDfpAccount),e.adserverTargeting.epp<=0))return this.vastURL;e.adserverTargeting=Object.entries(e.adserverTargeting).reduce((function(e,t){var r=_(t,2),i=r[0],n=r[1];return e[z[i]||i]=n,e}),{})}return t.adServers.dfp.buildVideoUrl({adUnit:this.prebidAdUnits,url:this.origVastURL,bid:e})}function Tt(e,t){return!t&&this.shouldAlwaysSendOutstreamContext[e]}function Ft(e,t,r,i,n,o){var a=this,s=Ot(It,this,Ut).call(this,{code:this.key,bidPoolId:this.getPoolId(t)},t,r,e),d=s.filter((function(e){return a.shouldSendPlacement[e.bidder]&&Ot(It,a,Tt).call(a,e.bidder,a.isOutstream)})),u=s.filter((function(e){return!a.shouldSendPlacement[e.bidder]&&!Ot(It,a,Tt).call(a,e.bidder,a.isOutstream)})),l=s.filter((function(e){return a.shouldSendPlacement[e.bidder]&&!Ot(It,a,Tt).call(a,e.bidder,a.isOutstream)})),c=s.filter((function(e){return Ot(It,a,Tt).call(a,e.bidder,a.isOutstream)&&!a.shouldSendPlacement[e.bidder]}));if(i){var p=function(e){return o?e.filter((function(e){return i[e.bidder]})):e.filter((function(e){return!i[e.bidder]}))};u=p(u),l=p(l),c=p(c),d=p(d)}var f=new Set(["ttd","ttd_i_s2s","ttd_o_s2s"]),h=u.filter((function(e){return f.has(e.bidder)})),v=u.filter((function(e){return!f.has(e.bidder)}));if(v.length>0){var m=this.getPrebidAdUnit(e,t,r);m.bids=v,n.push(m)}if(h.length>0){var b=this.getPrebidAdUnitForTTD(e,t,r);b.bids=h,n.push(b)}if(l.length>0){var y=this.getPrebidAdUnitWithPlacement(e,t,r);v.length>0&&!v.some((function(e){return"ttd"===e.bidder}))&&(y.mediaTypes.video.placement=Ot(It,this,Rt).call(this,this.prebidParams.plcmt)),y.bids=l,n.push(y)}if(c.length>0){var _=this.getPrebidAdUnitAlwaysOutstreamCtx(e,t,r);_.bids=c,n.push(_)}if(d.length>0){var g=this.getPrebidAdUnitWithPlacement(e,t,r);1!==g.mediaTypes.video.plcmt&&(g.mediaTypes.video.context="outstream"),g.bids=d,n.push(g)}}function jt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=C.UNIFORM,n=Ot(It,this,Dt).call(this);n&&C[n]&&(i=C[n]),i||(i=C.UNIFORM);var o=zt.getStrategy(i),a={bidHistory:"undefined"!=typeof __ez&&__ez.vhb&&__ez.vhb.globalBidHistory?__ez.vhb.globalBidHistory:{},bidder:r,strategyName:i},s=this.videoAdBidFloor>=0?this.videoAdBidFloor:0,d=t>0?t:1,u=e>=0?e:0;return o.calculate(s,d,u,a)}function Ut(e,t,r,i){var n=this,o=this.isOutstream?__ezOutstream.prebidBidders:__ezInstream.prebidBidders,a=this.getPlayerId(),s={minDur:this.params.min/1e3,maxDur:this.params.max/1e3,skippable:this.params.skip,shouldSendBidFloor:i,prebidParams:this.prebidParams,isOutstream:this.isOutstream,language:this.getVideoLanguage(a),timeOffset:this.timeOffset||0,adUnit:e,playerId:a,player:this.getPlayerById(a)};return o.map((function(e){var i=JSON.parse(JSON.stringify(e)),o=lt.getStrategy(i.bidder);return s.floorVal=Ot(It,n,jt).call(n,t,r,i.bidder),o&&(i=o.applyBidParams(i,s),i=o.applyAbTestParams(i,s)),i}))}function Rt(e){return 1==e||2==e?1:5}function Et(e){var t=this,r=e.filter((function(e){return!t.bidders.includes(e)}));this.bidders=this.bidders.concat(r)}function Mt(e){return!this.receivedBidders.includes(e)&&(this.receivedBidders.push(e),!0)}function Lt(e){if(epbjs&&epbjs.SS&&epbjs.SS.hasOwnProperty(e))return epbjs.SS[e];var t={};return"undefined"!=typeof __ezInstream&&__ezInstream.prebidBidders.map((function(e){void 0!==e.ssid&&(t[e.bidder]=parseInt(e.ssid))})),"undefined"!=typeof __ezOutstream&&__ezOutstream.prebidBidders.map((function(e){void 0!==e.ssid&&(t[e.bidder]=parseInt(e.ssid))})),t[e]}function Dt(){return this.isOutstream?"undefined"!=typeof __ezOutstream&&__ezOutstream.vatc&&__ezOutstream.vatc.fs?__ezOutstream.vatc.fs:null:"undefined"!=typeof __ezInstream&&__ezInstream.vatc&&__ezInstream.vatc.fs?__ezInstream.vatc.fs:null}const Vt=function(){return d((function e(t){var r,i,n=this;o(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=It),i.add(r),B(this,"bidFloorIndex",void 0),B(this,"videoFallbackFloors",void 0),B(this,"videoFallbackHashes",void 0),B(this,"videoFallbackType",void 0),B(this,"isOutstream",void 0),Object.keys(t).forEach((function(e){n[e]=t[e]})),this.origVastURL||(this.origVastURL=this.vastURL),this.retryCount||(this.retryCount=0,null==t.startingBidFloorIndex&&(this.bidFloorIndex=0),this.lastBidHash=this.videoAdBidHash,this.maxHBBid=0,this.maxHBBidder=void 0,this.initialBidFloor=this.videoAdBidFloor),this.hasOwnProperty("apsBidCount")||(this.apsBidCount=0),this.isComplete=!1,this.isTriggered=!1,this.bidders=[],this.receivedBidders=[],this.statSourceId=void 0,this.prebidCPM=void 0,this.played=!1,this.hadAPSBid=!1,this.addedAPSToVAST=!1,this.addedPrebidToVAST=!1,this.pmpDealsToConsider=[],this.isMultiAuction=0,this.didS2SBidderWin=!1,this.hasOwnProperty("gpid")||(this.gpid=this.breakID),this.shouldSendPlacement={medianet:!0,criteo:!0,pubmatic:!0,sovrn:!0,yieldmo:!0,vidazoo:!0,triplelift_o_s2s:!0,triplelift_i_s2s:!0},this.shouldSendMultipleFloorsInstream={rubicon:!0,openx:!0,yieldmo:!0,sharethrough:!0,onetag:!0,medianet:!0,appnexus:!0,rubicon_i_s2s:this.isS2SMFTest(),openx_i_s2s:this.isS2SMFTest(),sharethrough_i_s2s:this.isS2SMFTest(),pubmatic_i_s2s:this.isS2SMFTest(),unruly_i_s2s:this.isS2SMFTest(),medianet_i_s2s:this.isS2SMFTest(),onetag_i_s2s:this.isS2SMFTest()},this.shouldSendMultipleFloorsOutstream={rubicon:!0,openx:!0,sharethrough:!0,onetag:!0,pubmatic:!0,rubicon_o_s2s:this.isS2SMFTest(),openx_o_s2s:this.isS2SMFTest(),sharethrough_o_s2s:this.isS2SMFTest(),pubmatic_o_s2s:this.isS2SMFTest(),unruly_o_s2s:this.isS2SMFTest(),medianet_o_s2s:this.isS2SMFTest(),onetag_o_s2s:this.isS2SMFTest()},this.shouldAlwaysSendOutstreamContext={triplelift:!0,triplelift_i_s2s:!0}}),[{key:"getAPSStatSourceId",value:function(){return"undefined"!=typeof __ezInstream&&!this.isOutstream&&__ezInstream.apsSlot.slotID?11324:"undefined"!=typeof __ezOutstream&&this.isOutstream&&__ezOutstream.apsSlot.slotID?11337:""}},{key:"assembleTagURL",value:function(e){if(e||this.onlyUseVastProxy())return this.chooseHighestBidForPrebidRenderer();var t=this.addBidsToVAST(),r=t.prebidBid,i=t.apsBid,n=_(this.getHighestBidWithSource(),2),o=n[0],a=n[1];return this.isInstreamTruePrice()&&(r||i)&&o<=.18&&o>0&&(this.fallbackVastURL=a===O?this.getVastProxyAPSUrl(i):this.getVastProxyPrebidUrl(r),this.fallbackVastCPM=o,this.fallbackVastBid=a===O?i:r,T("No bids above 0.18, using fallback",o,a,this.fallbackVastBid)),this.updatePmpTargetingDeals(),this.isComplete=!0,this.markBreakAsComplete(this.key,this.isFloating),this.recordBiddersForBreak(),T(this.key+"\nVAST URL: ",this.vastURL+"\nPrebid:",r,"\nAPS:",i),!!r||!!i}},{key:"chooseHighestBidForPrebidRenderer",value:function(){T("Choosing highest bid for prebid renderer");var e=this.getWinningPrebidBid(),t=this.apsBid||null;this.maxHBBidder=e,this.maxHBBid=Ot(It,this,Ct).call(this,e);var r,i,n,o=!1;if(T("Prebid bid: ",e," APS bid: ",t," Max HB bid: ",this.maxHBBid),t&&(!e||t.bidVal>this.maxHBBid))this.vastURL=this.getVastProxyAPSUrl(t),null===(r=window.__ezDevtools)||void 0===r||null===(i=r.recordWinningBid)||void 0===i||i.call(r,this.impressionId,"amzn",t.bidVal),o=!0;else if(e){var a,s;this.vastURL=this.getVastProxyPrebidUrl(e),null===(a=window.__ezDevtools)||void 0===a||null===(s=a.recordWinningBid)||void 0===s||s.call(a,this.impressionId,e.bidder,e.cpm)}if(this.isComplete=!0,this.markBreakAsComplete(this.key,this.isFloating),this.recordBiddersForBreak(),this.noFill=!e&&!t,!this.noFill&&"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("ab_test_id")&&(this.vastURL+="&mod="+_ezaq.ab_test_id,"undefined"!=typeof __ez&&"true"===(null===(n=__ez)||void 0===n||null===(n=n.tf)||void 0===n?void 0:n.vacbc))){var d=o?this.getAPSStatSourceId():Ot(It,this,Lt).call(this,e.bidder);""!=d&&(this.vastURL+="&ssid="+d)}return!!e||!!t}},{key:"getVastProxyAPSUrl",value:function(e){var t=encodeURIComponent("https://aax.amazon-adsystem.com/e/dtb/vast?b="+e.amzniid+"&rnd="+Math.random().toString(36).substring(2,15)+"&pp="+e.amznbid);return"".concat(I,"/vast?adId=aps&vastUrl=").concat(t)}},{key:"getVastProxyPrebidUrl",value:function(e){var t=e&&e.ezVideoCacheKey?e.ezVideoCacheKey:e.videoCacheKey,r=encodeURIComponent("https://prebid.adnxs.com/pbc/v1/cache?uuid=".concat(t));return"".concat(I,"/vast?adId=").concat(e.videoCacheKey,"&vastUrl=").concat(r)}},{key:"getHighestBidWithSource",value:function(){var e=-1,t="",r=this.getWinningPrebidBid(),i=this.apsBid||null;return r&&(e=r.cpm,t=A),i&&i.bidVal>e&&(e=i.bidVal,t=O),[e,t]}},{key:"shouldAddBidToVAST",value:function(e,t,r){return e?!(t||r===A&&e<=.18&&this.isInstreamTruePrice()&&(T("Prebid bid is less than 0.18, not adding to VAST",e),1)):(T("shouldAddBidToVAST: falsy bid floor received"),!0)}},{key:"addBidsToVAST",value:function(){var e=this.getWinningPrebidBid(),t=this.apsBid||null;if(this.addedAPSToVAST&&this.addedPrebidToVAST)return{prebidBid:e,apsBid:t};this.maxHBBidder=e,this.maxHBBid=Ot(It,this,Ct).call(this,e),e&&this.shouldAddBidToVAST(e.cpm,this.addedPrebidToVAST,A)&&(this.vastURL=Ot(It,this,xt).call(this,e),this.addedPrebidToVAST=!0);var r=!1;return(window.__ezInstream&&window.__ezInstream.PreferPrebidOverAmzn>0||window.__ezOutstream&&window.__ezOutstream.PreferPrebidOverAmzn>0)&&(r=!0),""==this.getAPSStatSourceId()||e&&r||(t?void 0!==t.encodedQsParams&&this.shouldAddBidToVAST(t.bidVal,this.addedAPSToVAST,O)&&(this.vastURL+=t.encodedQsParams,this.addedAPSToVAST=!0,"undefined"!=typeof __ezOutstream&&(this.hadAPSBid=!0)):"undefined"!=typeof __ezOutstream&&(this.hadAPSBid=!1)),{prebidBid:e,apsBid:t}}},{key:"resetPrebidBid",value:function(){this.maxHBBid=0,this.maxHBBidder=void 0,this.addedPrebidToVAST=!1;var e=this.vastURL.startsWith(I);this.vastURL=this.origVastURL,this.addedAPSToVAST=!1,this.assembleTagURL(e)}},{key:"recordBiddersForBreak",value:function(){var e=[];if("undefined"!=typeof __ezInstream&&!this.isOutstream&&__ezInstream.prebidBidders&&0!=__ezInstream.prebidBidders.length){var t=__ezInstream.prebidBidders.map((function(e){return"string"==typeof e.ssid?parseInt(e.ssid):e.ssid}));e=e.concat(t)}if("undefined"!=typeof __ezOutstream&&this.isOutstream&&__ezOutstream.prebidBidders&&0!=__ezOutstream.prebidBidders.length){var r=__ezOutstream.prebidBidders.map((function(e){return"string"==typeof e.ssid?parseInt(e.ssid):e.ssid}));e=e.concat(r)}var i=this.getAPSStatSourceId();""!=i&&(e.push(i),this.apsBid&&Ot(It,this,Mt).call(this,i)),Ot(It,this,Et).call(this,e)}},{key:"getVideoBidCacheTopBid",value:function(){var e,t=null,r=this.getPlayerId();if("function"==typeof(null===(e=__ez)||void 0===e||null===(e=e.vbf)||void 0===e?void 0:e.getCache)){var i=__ez.vbf.getCache();i&&((t=i.getTopBid(r))?T("Top bid from videoBidCache:",t):T("No valid bids found in videoBidCache for player:",r))}return t}},{key:"getWinningPrebidBid",value:function(){var e;if(this.maxHBBidder)return T("Using previous set top bid:",this.maxHBBidder),this.maxHBBidder;if(void 0!==(null===(e=__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.vacbc)&&"true"===__ez.tf.vacbc)return this.getVideoBidCacheTopBid();var t=null;return Array.isArray(this.prebidAdUnits)&&this.prebidAdUnits.length>0&&this.prebidAdUnits.forEach((function(e){var r=__ez.fads.adLoadHB.bidCache.getTopBid(e);T("our cached bid is: ",r),r&&(!t||r.cpm>t.cpm)&&(t=r)})),t?T("Top bid:",t):T("No valid bids found."),t}},{key:"isBidCacheLoaded",value:function(){return 1==__ez.fads.loaded&&void 0!==__ez.fads.adLoadHB&&1==__ez.fads.adLoadHB.loaded}},{key:"updatePrebidBidCacheWithBids",value:function(e){var t,r=this;if(void 0!==(null===(t=__ez)||void 0===t||null===(t=t.tf)||void 0===t?void 0:t.vacbc)&&"true"===__ez.tf.vacbc)return T("A/B test active - bids already cached in bidResponse event, only updating received bidders"),void e.forEach((function(e){var t=Ot(It,r,Lt).call(r,e.bidder);t&&Ot(It,r,Mt).call(r,t)}));this.isBidCacheLoaded()&&(T("Caching prebid bids: ",e," for ad unit: ",this.prebidAdUnits),e.forEach((function(e){if(e.adserverTargeting&&e.adserverTargeting.hasOwnProperty("hb_uuid")&&void 0!==e.adserverTargeting.hb_uuid&&e.adserverTargeting.hasOwnProperty("hb_cache_id")&&void 0!==e.adserverTargeting.hb_cache_id){if(r.isBidCacheLoaded()){var t=r.prebidAdUnits[0];t?__ez.fads.adLoadHB.bidCache.cacheBid(t,e):T("No matching ad unit found for bid with bidPoolId:",e.bidPoolId)}var i=Ot(It,r,Lt).call(r,e.bidder);i&&Ot(It,r,Mt).call(r,i)}})))}},{key:"handleWinningAdIdOrHbUUId",value:function(e){var t,r;if(T("winning ad id",e),this.apsBid&&(this.apsBid.adId===e||"aps"==e))return T("found ad id or hbUUId: ",e," in aps bid: ",this.apsBid),this.statSourceId=this.getAPSStatSourceId(),void("true"!==(null===(r=__ez)||void 0===r||null===(r=r.tf)||void 0===r?void 0:r.vacbc)&&this.releasePrebidBids());if("true"===(null===(t=__ez)||void 0===t||null===(t=t.tf)||void 0===t?void 0:t.vacbc)){var i=__ez.vbf.getCache();if(i){T("Checking videoBidCache for ad id or hbUUId:",e);var n=i.getBidByVideoCacheKey(e);if(n)return T("Found ad id or hbUUId:",e," in videoBidCache:",n),i.removeBid(e),void this.recordWinAndFirePrebidImpression(n);T("Ad id or hbUUId:",e," not found in videoBidCache")}}if(this.isBidCacheLoaded()){var o=__ez.fads.adLoadHB.bidCache.getBidByAdId(e);if(null==o&&(o=__ez.fads.adLoadHB.bidCache.getBidByHbUUId(e)),o)return T("found ad id or hbUUId: ",e," in prebid cache: ",o),__ez.fads.adLoadHB.bidCache.removeBid(o),void this.recordWinAndFirePrebidImpression(o);this.releasePrebidBids()}T("neither aps nor prebid won the ad id or hbUUId: ",e)}},{key:"setStatSourceIdFromAdIdOrHbUUId",value:function(e){var t;if(this.apsBid&&(this.apsBid.adId===e||"aps"==e))return T("found ad id or hbUUId: ",e," in aps bid: ",this.apsBid),void(this.statSourceId=this.getAPSStatSourceId());if("true"===(null===(t=__ez)||void 0===t||null===(t=t.tf)||void 0===t?void 0:t.vacbc)){var r=__ez.vbf.getCache();if(r){T("Checking videoBidCache for ad id or hbUUId:",e);var i=r.getBidByVideoCacheKey(e);if(i)return void(this.statSourceId=Ot(It,this,Lt).call(this,i.bidder))}}if(this.isBidCacheLoaded()){var n=__ez.fads.adLoadHB.bidCache.getBidByAdId(e);if(null==n&&(n=__ez.fads.adLoadHB.bidCache.getBidByHbUUId(e)),n)return void(this.statSourceId=Ot(It,this,Lt).call(this,n.bidder))}}},{key:"recordWinAndFirePrebidImpression",value:function(e){var t,r;e&&(this.statSourceId=Ot(It,this,Lt).call(this,e.bidder),this.prebidCPM=e.cpm,__ez.vhb.setPrebidCPMEarnedFromPreviousAd(this.prebidCPM,this.isOutstream),__ez.vhb.recordWinForBidder(e.bidder,e.cpm),null===(t=window.__ezDevtools)||void 0===t||null===(r=t.recordWinningBid)||void 0===r||r.call(t,this.impressionId,e.bidder,e.cpm),window.PrebidImpressionController&&window.PrebidImpressionController.recordAndFireImpressionWonEvent(e),void 0!==e&&"string"==typeof e.bidder&&e.bidder.endsWith("_s2s")&&(this.didS2SBidderWin=!0),epbjs.markWinningBidAsUsed({adUnitCode:this.BreakID,adId:e.adId}))}},{key:"releasePrebidBids",value:function(){Array.isArray(this.prebidAdUnits)&&this.prebidAdUnits.length>0?this.prebidAdUnits.forEach((function(e){e&&e.code?(__ez.fads.adLoadHB.bidCache.releaseBid(e.code),T("Released bid for ad unit with key:",e.code)):T("Invalid ad unit or missing key:",e)})):T("No Prebid ad units provided.")}},{key:"removeCachedBidsFromAdBreak",value:function(){T("removing all bid from bid cache"),this.isBidCacheLoaded()&&(T("removing bid from bid cache"),Array.isArray(this.prebidAdUnits)&&this.prebidAdUnits.length>0?this.prebidAdUnits.forEach((function(e){e&&e.code?(__ez.fads.adLoadHB.bidCache.removeBidByCode(e.code),T("Removed bid for ad unit with code:",e.code)):T("Invalid ad unit or missing code:",e)})):T("No Prebid ad units provided.")),this.apsBid&&(T("removing aps bid from ad break: ",this.apsBid),this.apsBidCount=0,this.apsBid=null)}},{key:"getMultipleAdUnits",value:function(e,t){var r,i=[],n=this.isOutstream?this.shouldSendMultipleFloorsOutstream:this.shouldSendMultipleFloorsInstream,o=!1;"undefined"!=typeof __ez&&"true"===(null===(r=__ez)||void 0===r||null===(r=r.tf)||void 0===r?void 0:r.vasfs)&&(o=t&&Math.random()<.5),Ot(It,this,Ft).call(this,o,0,1,n,i,!1);for(var a=0;a<e;a++)Ot(It,this,Ft).call(this,t,a,e,n,i,!0);return this.prebidAdUnits=i,T("Our ad units are:",i),i}},{key:"getPoolId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=this.isOutstream?"prebid-video-outstream":"prebid-video-instream"+this.getAdBreakPosition(this.breakID),n=t?"-placement":"";return"".concat(i).concat(n).concat(r,"_").concat(e)}},{key:"getPrebidAdUnit",value:function(e,t,r){var i={code:this.key,ortb2Imp:{ext:{gpid:this.gpid}},mediaTypes:{video:JSON.parse(JSON.stringify(this.prebidParams))}};return i.bidPoolId=this.getPoolId(t),this.videoAdBidFloor>0&&e&&(i.floors={currency:"USD",schema:{delimiter:"|",fields:["mediaType","size"]},values:{"video|*":Ot(It,this,jt).call(this,t,r)}}),this.updateAdUnitForAbTests(i),i}},{key:"getPrebidAdUnitWithPlacement",value:function(e,t,r){var i={code:this.key,ortb2Imp:{ext:{gpid:this.gpid}},mediaTypes:{video:JSON.parse(JSON.stringify(this.prebidParams))}};return i.bidPoolId=this.getPoolId(t,!0),this.videoAdBidFloor>0&&e&&(i.floors={currency:"USD",schema:{delimiter:"|",fields:["mediaType","size"]},values:{"video|*":Ot(It,this,jt).call(this,t,r)}}),this.updateAdUnitForAbTests(i),i}},{key:"getPrebidAdUnitAlwaysOutstreamCtx",value:function(e,t,r){var i={code:this.key,ortb2Imp:{ext:{gpid:this.gpid}},mediaTypes:{video:JSON.parse(JSON.stringify(this.prebidParams))}};return 1!==this.prebidParams.plcmt&&(i.mediaTypes.video.context="outstream"),i.bidPoolId=this.getPoolId(t,!1,"-octx"),this.videoAdBidFloor>0&&e&&(i.floors={currency:"USD",schema:{delimiter:"|",fields:["mediaType","size"]},values:{"video|*":Ot(It,this,jt).call(this,t,r)}}),this.updateAdUnitForAbTests(i),i}},{key:"getPrebidAdUnitForTTD",value:function(e,t,r){var i={code:this.key,ortb2Imp:{ext:{gpid:this.gpid}},mediaTypes:{video:JSON.parse(JSON.stringify(this.prebidParams))}};return void 0!==i.mediaTypes.video.placement&&delete i.mediaTypes.video.placement,i.bidPoolId=this.getPoolId(t,!1,"_ttd"),this.videoAdBidFloor>0&&e&&(i.floors={currency:"USD",schema:{delimiter:"|",fields:["mediaType","size"]},values:{"video|*":Ot(It,this,jt).call(this,t,r)}}),i}},{key:"getAdBreakPosition",value:function(e){var t=e.split("-");if(t.length<3)return console.error("Failed to parse ad break position - malformed breakId: "+e),"";var r=t[t.length-2];return"preroll"!==r&&"midroll"!==r&&"postroll"!==r?(console.error("Failed to parse ad break position - unknown position on breakId: "+e),""):"-"+r}},{key:"getPlayerById",value:function(e){var t;return null===(t=window.ezVideoAdConductor)||void 0===t||null===(t=t.getVideoAdConductor())||void 0===t?void 0:t.getPlayerById(e)}},{key:"getPlayerId",value:function(){return this.key.split("$")[0]}},{key:"getIsPlayerCurrentlyFloating",value:function(){var e;return null===(e=this.getPlayerById(this.getPlayerId()))||void 0===e?void 0:e.isCurrentlyFloating()}},{key:"setFallbackPosition",value:function(e){T("bid: getting highest floor below",e);for(var t=0,r=-1,i=0;i<this.videoFallbackFloors.length;i++)this.videoFallbackFloors[i]<=e&&this.videoFallbackFloors[i]>t&&(t=this.videoFallbackFloors[i],r=i);if(r>-1){if(this.bidFloorIndex>=r)return;this.videoAdBidFloor=t,this.videoAdBidHash=this.videoFallbackHashes[r],this.bidFloorIndex=r,this.startingBidFloorIndex=this.bidFloorIndex}else this.videoAdBidFloor=0,this.videoAdBidHash="zero",this.bidFloorIndex=this.videoFallbackFloors.length,this.startingBidFloorIndex=this.bidFloorIndex;T("bid: setting fallback position to",this.videoAdBidFloor,this.videoAdBidHash)}},{key:"setStartingBidFloor",value:function(e){var t=e;T("bid: previous floor",t),t>0&&(t*=3),T("bid: getting highest floor below",t);var r=0,i=-1;if(t>0){for(var n=0;n<this.videoFallbackFloors.length;n++)if(this.videoFallbackFloors[n]<=t&&this.videoFallbackFloors[n]>r){i=n,(r=this.videoFallbackFloors[n])===e&&n>0?(i=n-1,T("bid: set floor up one step from last fill",r=this.videoFallbackFloors[n-1])):T("bid: set floor below 3x last fill",r);break}}else if(0===t){T("bid: finding floor ".concat(3," above ").concat(t));var o=this.videoFallbackFloors.indexOf(0);-1===o&&(o=this.videoFallbackFloors.length-1);var a=o-3;a<0&&(a=0),i=a,r=this.videoFallbackFloors[a]}i>-1?(this.videoAdBidFloor=r,this.videoAdBidHash=this.videoFallbackHashes[i],this.bidFloorIndex=i,this.startingBidFloorIndex=this.bidFloorIndex):(this.videoAdBidFloor=0,this.videoAdBidHash="zero",this.bidFloorIndex=this.videoFallbackFloors.length,this.startingBidFloorIndex=this.bidFloorIndex),T("bid: updated ".concat(this.isOutstream?"outstream":"in-content"," fallback floor to ").concat(this.videoAdBidFloor," ").concat(this.videoAdBidHash))}},{key:"updatePmpTargetingDeals",value:function(){var e=this;if(void 0!==this.videoPmpDeal&&Array.isArray(this.videoPmpDeal)&&0!==this.videoPmpDeal.length){var t=[];this.videoAdBidFloor>.2&&this.videoPmpDeal.forEach((function(r){"undefined"!==r.adjustedDealFloor&&(r.adjustedDealFloor>=99999||e.videoAdBidFloor>r.adjustedLowerDealFloor&&e.videoAdBidFloor<r.adjustedUpperDealFloor)&&t.push(r.dealId)})),this.pmpDealsToConsider=t,this.vastURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===t)return T("No key specified for VAST Tag custom targeting, returning VAST URL: "+e),e;if(!URL.canParse(e))return T("Invalid/Cannot parse VAST Tag URL: "+e),e;var i=new URL(e),n=i.searchParams;if(!n.has("cust_params"))return e;var o=new URLSearchParams(n.get("cust_params"));return null===r||r.length<1?o.has(t)?(T("Empty or null value specified for targeting key: ".concat(t,", val: ").concat(r,". Removing ").concat(t," from cust_params")),o.delete(t),n.set("cust_params",o.toString()),T("VAST Custom Targeting Params: ",Array.from(o.entries())),i.toString()):(T("No targeting key to remove because it is not in cust_params or the key is null here"),i.toString()):(Array.isArray(r)&&(r=r.join(",")),T("Setting VAST Custom Targeting Params with key: ".concat(t,", val: ").concat(r)),o.set(t,r),n.set("cust_params",o.toString()),T("VAST Custom Targeting Params: ",Array.from(o.entries())),i.toString())}(this.vastURL,"deal1",t)}}},{key:"markBreakAsComplete",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];__ez&&__ez.vhb&&__ez.vhb.breaks&&t&&"object"==e(__ez.vhb.breaks[t])&&!r?__ez.vhb.breaks[t].isComplete=!0:__ez&&__ez.vhb&&__ez.vhb.floatingBreaks&&t&&"object"==e(__ez.vhb.floatingBreaks[t])&&(__ez.vhb.floatingBreaks[t].isComplete=!0)}},{key:"isS2STest",value:function(){var e;return"true"===(null===(e=__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.pbs)}},{key:"onlyUseVastProxy",value:function(){return!!(this.isOutstream&&("undefined"!=typeof __ezOutstream&&__ezOutstream.hasOwnProperty("OnlyUseVastProxy")&&__ezOutstream.OnlyUseVastProxy||"undefined"!=typeof __ez&&__ez.tf&&"true"===__ez.tf.vaosg))}},{key:"getVideoLanguage",value:function(t){if(void 0!==window.ezVideo&&"object"===e(window.ezVideo.playerLanguage)&&"string"==typeof t){var r=window.ezVideo.playerLanguage[t];if(r&&"string"==typeof r&&2===r.length)return r}return null}},{key:"isAdBreakFrontloaded",value:function(){return"FrontLoad"===this.positionGen||"FrontLoadOverridden"===this.positionGen}},{key:"isAdBreakCustomPosition",value:function(){return"pub-midroll"===this.positionGen||"pub-midrollOverridden"===this.positionGen}},{key:"updateAdUnitForAbTests",value:function(e){var t,r;if("true"===(null===(t=__ez)||void 0===t||null===(t=t.tf)||void 0===t?void 0:t.vappp)&&!this.isOutstream){var i=this.getPlayerById(this.getPlayerId());null!=i&&i.isCurrentlyFloating()&&3===e.mediaTypes.video.pos&&(e.mediaTypes.video.pos=2)}return"1"===(null===(r=__ez)||void 0===r||null===(r=r.tf)||void 0===r?void 0:r.vappp)&&(e.mediaTypes.video.pos=1),e}},{key:"isInstreamTruePrice",value:function(){var e;return"true"===(null===(e=__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.vaitp)}},{key:"isS2SMFTest",value:function(){var e;return"true"===(null===(e=__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.vas2smf)}},{key:"getNextBid",value:function(){var e=this.videoFallbackFloors[this.bidFloorIndex];return void 0===this.videoFallbackHashes||this.bidFloorIndex>=this.videoFallbackHashes.length?{hash:"zero",bidValue:0}:{hash:this.videoFallbackHashes[this.bidFloorIndex],bidValue:e}}},{key:"updateBidHash",value:function(e){this.lastBidHash.includes(",")&&(this.lastBidHash=encodeURIComponent(this.lastBidHash)),e.includes(",")&&(e=encodeURIComponent(e));var t=this.vastURL.replace(/(eb_br%3D)[^%&]+/,"$1".concat(e));if(this.lastBidHash!==e&&t===this.vastURL)throw new Error("failed to replace old bid hash (".concat(this.lastBidHash,") with new hash (").concat(e,") in VAST ").concat(this.vastURL));this.vastURL=t,this.lastBidHash=e}}])}();var Nt=function(){return d((function e(t){o(this,e),this.id=t.bidId||t.adId||Math.random().toString(36).substr(2,9),this.adId=t.adId||this.id,this.adUnitCode=t.adUnitCode,this.bidder=t.bidder,this.bidderCode=t.bidderCode||t.bidder,this.cpm=t.cpm,this.originalCpm=t.originalCpm,this.mediaType=t.mediaType,this.videoCacheKey=t.videoCacheKey||this.adId||this.id,this.ezVideoCacheKey=t.ezVideoCacheKey||this.videoCacheKey,this.vastUrl=t.vastUrl,this.mediaTypes=t.mediaTypes,this.adserverTargeting=t.adserverTargeting,this.requestId=t.requestId,this.responseTimestamp=t.responseTimestamp||Date.now(),this.ttl=t.ttl||300,this.source=t.source,this.playerId=null}),[{key:"isExpired",value:function(){return Date.now()>this.responseTimestamp+1e3*this.ttl-3e3}},{key:"timeRemaining",value:function(){var e=Date.now(),t=this.responseTimestamp+1e3*this.ttl;return Math.floor((t-e)/1e3)}},{key:"isBetterThan",value:function(e){return!e||!(this.isExpired()&&!e.isExpired())&&(!(this.isExpired()||!e.isExpired())||this.cpm>e.cpm)}}])}(),Ht=function(){return d((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;o(this,e),this.items=[],this.maxSize=t,this._needsExpiredCheck=!0}),[{key:"size",value:function(){return this._needsExpiredCheck&&this.removeExpired(),this.items.length}},{key:"isEmpty",value:function(){return this._needsExpiredCheck&&this.removeExpired(),0===this.items.length}},{key:"dequeue",value:function(){return this.isEmpty()?null:this.items.shift()}},{key:"peek",value:function(){return this.isEmpty()?null:this.items[0]}},{key:"enqueue",value:function(e){this._needsExpiredCheck&&this.removeExpired();for(var t=0;t<this.items.length&&this.items[t].cpm>e.cpm;)t++;if(this.size()>=this.maxSize&&t>=this.maxSize)return{added:!1,removedBid:null};this.items.splice(t,0,e);var r=null;return this.size()>this.maxSize&&(r=this.items.pop()),{added:!0,removedBid:r}}},{key:"removeExpired",value:function(){var e=this,t=n(this.items);return this.items=this.items.filter((function(e){return!e.isExpired()})),this._needsExpiredCheck=!1,t.filter((function(t){return!e.items.includes(t)}))}},{key:"markForExpiredCheck",value:function(){this._needsExpiredCheck=!0}},{key:"getHighestCPM",value:function(){return this.isEmpty()?0:this.items[0].cpm}},{key:"getLowestCPM",value:function(){return this.isEmpty()?0:this.items[this.size()-1].cpm}},{key:"isWorthCaching",value:function(e){return this._needsExpiredCheck&&this.removeExpired(),this.size()<this.maxSize||e.cpm>this.getLowestCPM()}},{key:"getAllBids",value:function(){return this._needsExpiredCheck&&this.removeExpired(),n(this.items)}},{key:"findBidByVideoCacheKey",value:function(e){return this._needsExpiredCheck&&this.removeExpired(),this.items.find((function(t){return t.videoCacheKey===e}))||null}},{key:"removeBid",value:function(e){this._needsExpiredCheck&&this.removeExpired();var t=this.items.findIndex((function(t){return t.videoCacheKey===e}));return-1===t?null:this.items.splice(t,1)[0]}}])}();const Gt=new(function(){return d((function e(){o(this,e),this.playerCaches={},this.bidIndex={},this.defaultMaxQueueSize=12,this.lastCleanup=Date.now(),this.cleanupInterval=15e3}),[{key:"getPlayerCache",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultMaxQueueSize;return this.playerCaches[e]||(this.playerCaches[e]=new Ht(t)),this.playerCaches[e]}},{key:"addBid",value:function(e,t){var r=new Nt(t);r.playerId=e,this.maybeCleanup();var i=this.getPlayerCache(e);if(!i.isWorthCaching(r))return T("Bid ".concat(r.videoCacheKey," from ").concat(r.bidder," with CPM $").concat(r.cpm," not worth caching for player ").concat(e)),!1;var n=i.enqueue(r);return n.added&&(this.bidIndex[r.videoCacheKey]={playerId:e,bid:r},n.removedBid&&delete this.bidIndex[n.removedBid.videoCacheKey],T("Cached bid ".concat(r.videoCacheKey," from ").concat(r.bidder," with CPM $").concat(r.cpm," for player ").concat(e))),n.added}},{key:"isWorthCaching",value:function(e,t){return this.getPlayerCache(e).isWorthCaching(t)}},{key:"getTopBid",value:function(e){return this.maybeCleanup(!0),this.getPlayerCache(e).peek()||null}},{key:"getBidByVideoCacheKey",value:function(e){var t=this.bidIndex[e];return t?t.bid.isExpired()?(this.removeBid(e),null):t.bid:null}},{key:"removeBid",value:function(e){var t=this.bidIndex[e];if(!t)return!1;var r=t.playerId;return!!this.getPlayerCache(r).removeBid(e)&&(delete this.bidIndex[e],!0)}},{key:"maybeCleanup",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Date.now();if(!(r-this.lastCleanup<this.cleanupInterval)||t){T("Cleaning up expired bids from video bid cache"),this.lastCleanup=r,Object.values(this.playerCaches).forEach((function(e){e.markForExpiredCheck()}));var i=0;Object.entries(this.playerCaches).forEach((function(t){var r=_(t,2),n=r[0],o=r[1].removeExpired();o.length>0&&(o.forEach((function(t){delete e.bidIndex[t.videoCacheKey]})),T("Removed ".concat(o.length," expired bids from player ").concat(n)),i+=o.length)})),i>0&&T("Total of ".concat(i," expired bids removed from cache"))}}},{key:"getStats",value:function(){var e={totalPlayers:Object.keys(this.playerCaches).length,totalBids:Object.keys(this.bidIndex).length,playerStats:{}};return Object.entries(this.playerCaches).forEach((function(t){var r=_(t,2),i=r[0],n=r[1];e.playerStats[i]={bidCount:n.size(),highestCPM:n.getHighestCPM(),lowestCPM:n.getLowestCPM()}})),e}},{key:"setDefaultMaxQueueSize",value:function(e){"number"==typeof e&&e>0&&(this.defaultMaxQueueSize=e)}},{key:"setPlayerMaxQueueSize",value:function(e,t){if(!("number"!=typeof t||t<=0)){var r=this.getPlayerCache(e),i=r.maxSize;if(r.maxSize=t,i>t)for(;r.size()>t;){var n=r.items.pop();n&&delete this.bidIndex[n.videoCacheKey]}}}}])}());function qt(){var e;"1"===new URLSearchParams(window.location.search).get("ez_vbf_debug")&&(e=console).log.apply(e,["[VideoBidFilter]"].concat(Array.prototype.slice.call(arguments)))}var Wt=h();function Kt(e){if(!e)return{vastXml:null,contentFound:!1};if(e.vastXml)return{vastXml:e.vastXml,contentFound:!0};if(e.vastUrl){if(function(e){try{if(!e||"string"!=typeof e)return!1;if(!e.startsWith("data:text/xml;base64,"))return!1;var t=e.split(",")[1],r=atob(t.split("?")[0]);return r.trim().startsWith("<")&&(r.includes("<VAST")||r.includes("<vast")||r.includes("<Vast")||r.includes("<?xml"))}catch(e){return!1}}(e.vastUrl))try{qt("Found base64 encoded VAST XML in vastUrl for bid from ".concat(e.bidder));var t=atob(e.vastUrl.split(",")[1].split("?")[0]);return e.vastXml=t,{vastXml:t,contentFound:!0}}catch(e){qt("Error decoding base64 vastUrl: ".concat(e.message))}qt("Creating VAST wrapper for bid from ".concat(e.bidder," with vastUrl"));var r=(i=e.vastUrl,o=(n=(n=e.vastImpUrl)&&(Array.isArray(n)?n:[n]))?n.map((function(e){return"<Impression><![CDATA[".concat(e,"]]></Impression>")})).join(""):"",'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['.concat(i,"]]></VASTAdTagURI>\n        ").concat(o,"\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>"));return e.vastXml=r,{vastXml:r,contentFound:!0}}var i,n,o;return{vastXml:null,contentFound:!1}}function Jt(e){return Yt.apply(this,arguments)}function Yt(){return(Yt=w(P().mark((function e(t){var r,i,n,o,a,s;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return qt("Cannot cache bid externally, missing required data (bid is null or undefined)"),e.abrupt("return",null);case 3:if(r=Kt(t),i=r.vastXml,r.contentFound){e.next=7;break}return qt("Cannot cache bid externally, no VAST content found",t),e.abrupt("return",null);case 7:return e.prev=7,n={puts:[{type:"xml",value:i,ttlseconds:Number(t.ttl)+15}]},e.next=11,fetch(Wt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 11:if((o=e.sent).ok){e.next=14;break}throw new Error("HTTP error ".concat(o.status));case 14:return e.next=16,o.json();case 16:if((a=e.sent)&&a.responses&&a.responses.length){e.next=19;break}throw new Error("Invalid response from cache server");case 19:return s=a.responses[0].uuid,qt("Successfully cached bid externally, cache key: ".concat(s)),e.abrupt("return",s);case 24:return e.prev=24,e.t0=e.catch(7),qt("Error caching bid externally: ".concat(e.t0.message)),e.abrupt("return",null);case 28:case"end":return e.stop()}}),e,null,[[7,24]])})))).apply(this,arguments)}function Zt(e,t){if(!e||!t)return e;if(e.videoCacheKey=t,e.ezVideoCacheKey=t,e.adserverTargeting){e.adserverTargeting.hb_cache_id=t,e.adserverTargeting.hb_uuid=t;var r=new URL(Wt);e.adserverTargeting.hb_cache_host=r.host,e.adserverTargeting.hb_cache_path=r.pathname}return e}function Xt(e){return $t.apply(this,arguments)}function $t(){return($t=w(P().mark((function e(t){var r;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt(t);case 2:return r=e.sent,Zt(t,r),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qt(){return(Qt=w(P().mark((function e(t){var r,i,n,o,a,s;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return qt("bid is null or undefined"),e.abrupt("return",t);case 3:if("video"!==t.mediaType){e.next=30;break}if(n=er(t.adUnitCode)){e.next=7;break}return e.abrupt("return");case 7:if((o=(null===(r=__ez)||void 0===r||null===(r=r.vhb)||void 0===r?void 0:r.breaks[t.adUnitCode])||(null===(i=__ez)||void 0===i||null===(i=i.vhb)||void 0===i?void 0:i.floatingBreaks[t.adUnitCode]))&&!t.mediaTypes&&(t.mediaTypes={},t.mediaTypes.video=o.prebidParams),!(Gt.isWorthCaching(n,t)&&t.cpm>0)){e.next=24;break}if(qt("Adding high value bid from ".concat(t.bidder," with CPM $").concat(t.cpm," to priority queue for player ").concat(n)),!(t&&t.vastUrl&&t.vastUrl.startsWith(Wt))){e.next=17;break}a=new URL(t.vastUrl),(s=a.searchParams.get("uuid"))&&(t=Zt(t,s)),e.next=21;break;case 17:if(t.vastUrl&&t.vastUrl.startsWith(Wt)){e.next=21;break}return e.next=20,Xt(t);case 20:t=e.sent;case 21:Gt.addBid(n,t),e.next=28;break;case 24:__ez.vbf.filteredBidCount||(__ez.vbf.filteredBidCount={}),__ez.vbf.filteredBidCount[n]||(__ez.vbf.filteredBidCount[n]=0),__ez.vbf.filteredBidCount[n]++,qt("Skipping bid from ".concat(t.bidder," with CPM $").concat(t.cpm," for player ").concat(n,", total bids filtered: ").concat(__ez.vbf.filteredBidCount[n]));case 28:e.next=31;break;case 30:qt("somehow have non video bid",t);case 31:return e.abrupt("return",t);case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function er(e){if(!e)return null;if(e.startsWith("ez-"))return e.split("$")[0];if(e.includes("prebid-video-")){var t=e.match(/prebid-video-(instream|outstream)([^_]*)/);if(t)return"outstream"===t[1]?"ez-o":"ez-i"}return e}const tr={initVideoBidFilter:function(){return qt("Initializing video bid filter with VideoBidCache integration"),{getCache:function(){return Gt}}},videoBidCache:Gt,cacheExternally:Jt,getVastToCache:Kt,cacheExternallyAndUpdateTargeting:Xt,cacheOrFilterBid:function(e){return Qt.apply(this,arguments)}};function rr(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ir(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ir(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function nr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ar(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}var sr=new WeakSet;function dr(e){var t=this;T("startPrebidBidding");var r=e.isOutstream?__ezOutstream.prebidBidders:__ezInstream.prebidBidders;if(null==r||!r.length)return T("No Prebid bidders"),Promise.reject();if(!epbjs||!epbjs.requestBids||!epbjs.que)return T("something wrong with epbjs"),Promise.reject();var i=!0;window.__ezInstream&&window.__ezInstream.DoNotPassBidFloorToPreBid>0&&(i=!1);var n=1;"US"===(_ezaq.country||"US")&&(n=5);var o=e.getMultipleAdUnits(n,i);return new Promise((function(r,i){var n;n=setTimeout((function(){T("Prebid timed out"),i("Prebid timed out")}),12e4);var a=t;epbjs.que.push((function(){T("Prebid.js requesting bids",o,"timeout",a.prebidBidderTimeoutMS);var t,i={timeout:a.prebidBidderTimeoutMS,adUnits:o,bidsBackHandler:(t=w(P().mark((function t(i,o,s){var d;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return clearTimeout(n),T("Current ad break: ",e),T("Prebid received bids: ",i,"\nTimed Out: ",o,"\nAuction ID: ",s),d=i[e.key],t.next=6,a.externalBidCacheFix(d,e);case 6:d?(e.updatePrebidBidCacheWithBids(d.bids),a.recordBidders(d.bids)):o&&a.adsShown>0&&(a.prebidBidderTimeoutMS+=1200,T("Prebid timed out, incrementing timeout: ",a.prebidBidderTimeoutMS)),r();case 8:case"end":return t.stop()}}),t)}))),function(e,r,i){return t.apply(this,arguments)}),labels:["iid1:".concat(e.impressionId)]};try{var s,d=null===(s=window.ezVideoAdConductor)||void 0===s||null===(s=s.getVideoAdConductor())||void 0===s?void 0:s.getPlayerById(e.getPlayerId());if(d){var u,l,c=d.adRenderer.videoPlayer_.player.player;if(c.videos){var p=c.playlist.currentIndex();u=c.videos[p]}else u=d.adRenderer.videoPlayer_.videoObject.Video;u&&(i.ortb2={site:{content:{id:u.VideoContentId,title:u.Title,cattax:6,cat:(null===(l=u.IABCategoryIds)||void 0===l?void 0:l.split(","))||[],keywords:u.Keywords,len:Math.round(u.VideoDurationMs/1e3),language:u.Language}}})}}catch(e){T("Error setting ORTB2",e)}epbjs.requestBids(i)}))}))}function ur(e){var t=e.videoAdBidFloor;if(void 0!==e.videoAdBidFloorAmazon&&e.videoAdBidFloorAmazon>0&&(t=e.videoAdBidFloorAmazon),T("unmodified bid floor"+e.videoAdBidFloorUnmodified+"vid floor"+t+" bidcount "+e.apsBidCount),e.apsBidCount>0)return T("Already requested APS bid for this adBreak, returning"),Promise.reject();var r=30;e&&e.prebidParams&&e.prebidParams.hasOwnProperty("maxduration")&&(r=e.prebidParams.maxduration);var i=e.isOutstream?__ezOutstream:__ezInstream;if(!i.apsSlot.slotID)return T("No APS slots"),Promise.reject();this.preloadAmazonH2BidLibrary(),T("Setting up APS");var n=this.prebidBidderTimeoutMS;return new Promise(function(){var o=w(P().mark((function o(a,s){var d,u,l,c,p,f,h,v,m,b;return P().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return b=function(r){if(T("APS received bids for key =",e.key,r),r.length>0)if(l)for(var i,n=function(t){__ez.fads.getAmazonBidFromHash(r[t].amznbid).then((function(n){r[t].bidVal=n,r[t].bps=n/v(r[t].slotID),(!i||r[t].bps>i.bps)&&(i=r[t],e.apsBid=i,e.apsBidCount=1),t===r.length-1&&a()}))},o=0;o<r.length;o++)n(o);else e.apsBid=r[0],e.apsBidCount=1,a();else t>=200?(t/=2,d.floor={currency:"USD",value:Math.round(100*t)},m()):t>0?(t=0,delete d.floor,m()):a()},m=function(){apstag.fetchBids({slots:u,timeout:n,params:{iid1:e.impressionId}},b)},v=function(e){if("string"!=typeof e)return 30;var t=e.match(/(\d+)-(\d+)seconds/);return t?parseInt(t[2],10):30},o.next=5,x("apstag",k,100).catch((function(){s("APS timed out")}));case 5:if((d=i.apsSlot).slotID){o.next=10;break}return T("No APS slot ID"),s("No APS slot ID"),o.abrupt("return");case 10:if(u=[d],l=!0,void 0!==i.allApsSlots&&i.allApsSlots.length>0&&l){for(u=[],c=i.allApsSlots,p=0;p<c.length;p++)c[p].Duration<=r&&u.push(c[p].Slot);0==u.length&&(u=[d])}if(T("APS slots sent for bidding:",u),t>0)for(d.floor={currency:"USD",value:Math.round(100*t)},f=0;f<u.length;f++)u[f].floor={currency:"USD",value:Math.round(100*t)};else for(delete d.floor,h=0;h<u.length;h++)delete u[h].floor;T("APS requesting instream bids for key =",e.key),m();case 17:case"end":return o.stop()}}),o)})));return function(e,t){return o.apply(this,arguments)}}())}function lr(e){var t=this,r=e.videoAdBidFloor;if(void 0!==e.videoAdBidFloorAmazon&&e.videoAdBidFloorAmazon>0&&(r=e.videoAdBidFloorAmazon),T("unmodified bid floor"+e.videoAdBidFloorUnmodified+"vid floor"+r+" bidcount "+e.apsBidCount),e.apsBidCount>0)return T("Already requested APS bid for this adBreak, returning"),Promise.reject();var i=30;e&&e.prebidParams&&e.prebidParams.hasOwnProperty("maxduration")&&(i=e.prebidParams.maxduration);var n=e.isOutstream?__ezOutstream:__ezInstream;if(!n.apsSlot.slotID)return T("No APS slots"),Promise.reject();this.preloadAmazonH2BidLibrary(),T("Setting up APS");var o=this.prebidBidderTimeoutMS;return new Promise(function(){var a=w(P().mark((function a(s,d){var u,l,c,p,f,h;return P().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x("aps",k,100).catch((function(){d("APS timed out")}));case 2:if(u=function(t){return or({id:t.slotID,video:{startdelay:e.prebidParams.startdelay,plcmt:e.prebidParams.plcmt,pos:e.prebidParams.pos,w:e.prebidParams.w,h:e.prebidParams.h},sizes:t.sizes},r>0&&{bidfloor:Math.round(100*r),bidfloorcur:"USD"})},(l=n.apsSlot).slotID){a.next=8;break}return T("No APS slot ID"),d("No APS slot ID"),a.abrupt("return");case 8:if(c=[],void 0!==n.allApsSlots&&n.allApsSlots.length>0){for(p=0;p<n.allApsSlots.length;p++)(f=n.allApsSlots[p]).Duration<=i&&c.push(u(f.Slot));0===c.length&&c.push(u(l))}else c.push(u(l));return a.prev=11,aps.record("ad/slot/define",{imp:c}),T("APS requesting bids for key =",e.key),h=c.map((function(e){return e.id})),a.next=17,ar(sr,t,cr).call(t,c,h,e,o,true);case 17:if(!a.sent.success){a.next=22;break}return T("APS bid successful at floor:",r),s(),a.abrupt("return");case 22:T("No APS bids received for adBreak"),s(),a.next=30;break;case 26:a.prev=26,a.t0=a.catch(11),T("Error during APS bidding:",a.t0),s();case 30:case"end":return a.stop()}}),a,null,[[11,26]])})));return function(e,t){return a.apply(this,arguments)}}())}function cr(e,t,r,i,n){return pr.apply(this,arguments)}function pr(){return(pr=w(P().mark((function e(t,r,i,o,a){var s,d,u,l,c,p,f,h,v,m,b,y,_,g,w,B,S,k;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e){if("string"!=typeof e)return 30;var t=e.match(/(\d+)-(\d+)seconds/);return t?parseInt(t[2],10):30},e.prev=1,e.next=4,aps.record("ad/slot/define",{imp:t});case 4:return u=new Promise((function(e,t){d=setTimeout((function(){t(new Error("APS bid timeout"))}),o)})),e.prev=5,e.next=8,Promise.race([aps.record("ad/targeting/fetch",{itemIds:r,params:{iid1:i.impressionId}}),u]);case 8:e.next=16;break;case 10:return e.prev=10,e.t0=e.catch(5),T("APS request failed:",e.t0.message||String(e.t0)),clearTimeout(d),e.abrupt("return",{success:!1});case 16:clearTimeout(d),T("APS fetch completed"),l=aps.read("ad/targeting"),c=n(l.keys()).filter((function(e){return r.includes(e)})),p=rr(c),e.prev=21,p.s();case 23:if((f=p.n()).done){e.next=61;break}if(h=f.value,!a){e.next=53;break}if(v=void 0,m=[],!(b=l.get(h))||!b.has("amznbid")){e.next=45;break}return e.prev=30,e.next=33,__ez.fads.getAmazonBidFromHash(b.get("amznbid"));case 33:y=e.sent,_="",g=rr(b);try{for(g.s();!(w=g.n()).done;)B=w.value,_+="&".concat(B[0],"=").concat(B[1])}catch(e){g.e(e)}finally{g.f()}S={slotID:h,amzniid:b.get("amzniid"),amznbid:b.get("amznbid"),bidVal:y,bps:y/s(h),encodedQsParams:encodeURIComponent(_)},m.push(S),(!v||S.bps>v.bps)&&(v=S),e.next=45;break;case 42:e.prev=42,e.t1=e.catch(30),T("Error processing APS bid",e.t1);case 45:if(!v){e.next=51;break}return T("Highest APS bid returned: ",v),i.apsBid=v,i.apsBidCount=1,i.hadAPSBid=!0,e.abrupt("return",{success:!0});case 51:e.next=59;break;case 53:if(!(k=l.get(h))||!k.has("amznbid")){e.next=59;break}return i.apsBid={slotID:h,amznbid:k.get("amznbid")},i.apsBidCount=1,i.hadAPSBid=!0,e.abrupt("return",{success:!0});case 59:e.next=23;break;case 61:e.next=66;break;case 63:e.prev=63,e.t2=e.catch(21),p.e(e.t2);case 66:return e.prev=66,p.f(),e.finish(66);case 69:return e.abrupt("return",{success:!1});case 72:return e.prev=72,e.t3=e.catch(1),T("Error in fetchAPSBids:",e.t3),e.abrupt("return",{success:!1});case 76:case"end":return e.stop()}}),e,null,[[1,72],[5,10],[21,63,66,69],[30,42]])})))).apply(this,arguments)}function fr(e){var t,r;return window.ezslot_outstream&&e.includes("outstream")&&(null===(t=window.__ezOutstream)||void 0===t?void 0:t.UseGPTOutstream)&&(null===(r=window.__ezOutstream)||void 0===r?void 0:r.fallbackToGPT)}const hr=function(){return d((function e(){var t,r,i,n;o(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(i=this,n=sr),n.add(i),B(this,"breaks",{}),B(this,"floatingBreaks",{}),B(this,"target",new EventTarget),B(this,"biddingInProcess",{}),B(this,"prebidBidderTimeoutMS",1800),B(this,"instreamPrebidCPMFromPreviousAd",0),B(this,"outstreamPrebidCPMFromPreviousAd",0),B(this,"globalBidHistory",{}),B(this,"bidders",{}),B(this,"auctionsRun",0),B(this,"adsShown",0),B(this,"auctionPromiseByImpressionId",{}),F()&&epbjs.que.push((function(){epbjs.setConfig({debug:!1})})),window.__ez.vhb&&(this.breaks=__ez.vhb.breaks,this.target=__ez.vhb.target,__ez.vhb.floatingBreaks&&(this.floatingBreaks=__ez.vhb.floatingBreaks)),(null!==(t=window.__ezInstream)&&void 0!==t&&null!==(t=t.apsSlot)&&void 0!==t&&t.slotID||null!==(r=window.__ezOutstream)&&void 0!==r&&null!==(r=r.apsSlot)&&void 0!==r&&r.slotID)&&this.preloadAmazonH2BidLibrary(),this.initializeBidFilter(),this.bidSingle(),__ez.vhb=this}),[{key:"doAuction",value:function(e){var t,r,i=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(t=this.auctionPromiseByImpressionId)[r=e.impressionId]||(t[r]=w(P().mark((function t(){var r;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.biddingInProcess[e.getPlayerId()]=!0,__ez.vhb.auctionsRun++,r=[ar(sr,i,dr).call(i,e)],e.hadAPSBid||n&&e.isOutstream&&i.isSingleAPSAuctionTestActive()?n&&e.isOutstream&&i.isSingleAPSAuctionTestActive()&&T("APS auction skipped for outstream break due to single APS auction test"):"undefined"!=typeof __ez&&__ez.tf&&"true"===__ez.tf.napss?r.push(ar(sr,i,lr).call(i,e)):r.push(ar(sr,i,ur).call(i,e)),t.abrupt("return",Promise.allSettled(r));case 5:case"end":return t.stop()}}),t)})))())}},{key:"bid",value:(a=w(P().mark((function e(t,r){var i,n=this;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.biddingInProcess[t.getPlayerId()]=!0,!this.shouldConsiderCustomBreaksOutstreamCollision(t)){e.next=6;break}return T("Handling custom breaks outstream collision"),e.next=5,this.handleCustomBreaksOutstreamCollision(t,r);case 5:return e.abrupt("return");case 6:if("1"!==new URLSearchParams(window.location.search).get("ez_fake_instream")){e.next=12;break}return t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),t.vastURL="https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&sz=640x480&ciu_szs=300x250%2C728x90&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=",this.dispatchRenderAdBreak(t),e.abrupt("return");case 12:i=r||!j(t.isOutstream),this.doAuction(t,!1).catch((function(e){T("Error bidding",e),t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating)})).finally((function(){T("Bidding finished"),t.assembleTagURL(i),n.dispatchRenderAdBreak(t)}));case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"bidMultipleBreaks",value:function(e,t){var r=this;if(0!==e.length){var i=e.map((function(e){return r.doAuction(e,!0)}));Promise.allSettled(i).finally((function(){var i,n=null,o=-1,a=null;e.forEach((function(e){var t=_(e.getHighestBidWithSource(),2),r=t[0];t[1];r>o&&(o=r,n=e),e.isOutstream||(a=e),e.isComplete=!0,e.isMultiAuction=1}));var s={};if(n){var d=t||!j(n.isOutstream);n.assembleTagURL(d),s.bestBreak=n}if(n&&n.isOutstream&&a){var u=t||!j(a.isOutstream);a.assembleTagURL(u),s.instreamBreak=a}if(!n&&a){var l=t||!j(a.isOutstream);a.assembleTagURL(l),s.bestBreak=a}null!==(i=window.__ezDevtools)&&void 0!==i&&i.addMultiAuction&&__ezDevtools.addMultiAuction(e.map((function(e){var t=_(e.getHighestBidWithSource(),2),r=t[0],i=t[1];return{impressionId:e.impressionId,cpm:r,bidSource:i,isBest:e===s.bestBreak}}))),r.dispatchRenderMultipleAdBreaks(s)}))}}},{key:"addListener",value:function(e,t){this.target.addEventListener(e,t)}},{key:"dispatchRenderAdBreak",value:function(e){var t=new Event("RenderAdBreak");t.AdBreak=e,this.target.dispatchEvent(t)}},{key:"dispatchRenderMultipleAdBreaks",value:function(e){var t=new Event("RenderAdBreak");t.AdBreaks=e,this.target.dispatchEvent(t)}},{key:"getBreaks",value:function(e,t){var r=e+"$"+t+"$"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return Object.values(this.breaks).filter((function(e){return e.key.includes(r)}))}},{key:"getFloatingBreaks",value:function(e,t){var r=e+"$"+t+"$"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return Object.values(this.floatingBreaks).filter((function(e){return e.key.includes(r)}))}},{key:"getIncompleteBreaks",value:function(e,t){var r=e+"$"+t+"$"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);return Object.values(this.breaks).filter((function(e){return e.key.includes(r)&&!e.isComplete}))}},{key:"requestBreaks",value:(n=w(P().mark((function t(r,i,n,o,a,s,d){var u,l,c,p,f,h,v,m,b,y,_,g,w,B,S,k,z=this,A=arguments;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=A.length>7&&void 0!==A[7]?A[7]:null,l=A.length>8&&void 0!==A[8]&&A[8],p=A.length>10&&void 0!==A[10]?A[10]:null,f=r+"$"+i+"$"+a,(c=A.length>9&&void 0!==A[9]&&A[9])?Object.keys(this.floatingBreaks).forEach((function(e){e.includes(f)&&delete z.floatingBreaks[e]})):Object.keys(this.breaks).forEach((function(e){e.includes(f)&&delete z.breaks[e]})),h=-1,v=-1,m=-1,b=-1,"object"===e(window.lastVideoFloor)&&window.lastVideoFloor.hasOwnProperty("last")&&(h=window.lastVideoFloor.last,v=window.lastVideoFloor.outstream,m=window.lastVideoFloor.instream,b=window.lastVideoFloor.highest),y=0,"ez-o"===r&&"undefined"!=typeof __ezOutstream&&__ezOutstream.UnfilledCnt?y=__ezOutstream.UnfilledCnt:"undefined"!=typeof __ezInstream&&__ezInstream.UnfilledCnt&&(y=__ezInstream.UnfilledCnt),_={ads_enabled:n,autoplay:s?1:0,content_id:i,floating:d?1:0,pageview_id:_ezaq.page_view_id,player_id:r,position_id:o,floor_version:0,prevfl:h,prevflo:v,prevfli:m,prevflh:b,unf_c:y,pv_ep:_ezaq.t_epoch},"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("url")&&(_.parent_url=_ezaq.url),_.is_humix_app=window.is_humix_app?1:0,a&&(_.video_index=a),"undefined"!=typeof __ezOutstream&&__ezOutstream.hasOwnProperty("AdIndex")&&(_.ad_index=__ezOutstream.AdIndex),"undefined"!=typeof __ezOutstream&&__ezOutstream.hasOwnProperty("floorVersion")&&(_.floor_version=__ezOutstream.floorVersion),"undefined"!=typeof __ezOutstream&&__ezOutstream.hasOwnProperty("generatorVersion")&&(_.generator_version=__ezOutstream.generatorVersion),("undefined"!=typeof __ezOutstream&&__ezOutstream.rampUp||"undefined"!=typeof __ezInstream&&__ezInstream.rampUp)&&(_.reducer=1),"undefined"!=typeof __ezInstream&&__ezInstream.hasOwnProperty("EnableVideoDeals")&&(_.enable_deals=__ezInstream.EnableVideoDeals?1:0),"string"==typeof u&&(_.ad_unit=u),ar(sr,this,fr).call(this,i)&&(_.use_gpt_outstream=1),"undefined"!=typeof __ezOutstream&&l&&(_.is_first_break=1),"1"===new URLSearchParams(window.location.href).get("ez_no_outstream_floor")&&(_.ez_no_outstream_floor="1"),"undefined"!=typeof _ezaq&&_ezaq.hasOwnProperty("ab_test_id")&&(_.mod=_ezaq.ab_test_id),g=window._ez_sa||window._ez_send_requests_through_ezoic||window.hasOwnProperty("ezIntType")&&"wp"===window.ezIntType?"https://g.ezoic.net":window.location.origin,(w=new URL("/ez-vasts",g)).search=new URLSearchParams(_),t.next=33,fetch(w).catch((function(e){B=e}));case 33:if(S=t.sent,!B){t.next=37;break}return console.error("Error:",B),t.abrupt("return",[]);case 37:return t.next=39,S.json();case 39:if((k=t.sent)&&0!==k.length){t.next=43;break}return console.error("No breaks receieved. Not bidding."),t.abrupt("return",[]);case 43:if(k.forEach((function(e){c?(z.floatingBreaks[e.key]=new Vt(e),z.floatingBreaks[e.key].isFloating=!0,null!==p&&(z.floatingBreaks[e.key].floatPosition=p)):(z.breaks[e.key]=new Vt(e),z.breaks[e.key].isFloating=!1,null!==p&&(z.breaks[e.key].floatPosition=p))})),!c){t.next=46;break}return t.abrupt("return",this.getFloatingBreaks(r,i,a));case 46:return t.abrupt("return",this.getBreaks(r,i,a));case 47:case"end":return t.stop()}}),t,this)}))),function(e,t,r,i,o,a,s){return n.apply(this,arguments)})},{key:"biddingComplete",value:function(e){this.biddingInProcess[e]=!1}},{key:"getBiddingInProcess",value:function(e){return this.biddingInProcess[e]||!1}},{key:"recordBidders",value:function(e){var t=this;e.forEach((function(e){__ez.vhb.bidders.hasOwnProperty(e.bidder)||(__ez.vhb.bidders[e.bidder]={bidsResponded:0,bidsWon:0,maxBidValue:-1}),__ez.vhb.bidders[e.bidder].bidsResponded++,__ez.vhb.bidders[e.bidder].maxBidValue<e.cpm&&(__ez.vhb.bidders[e.bidder].maxBidValue=e.cpm),t.recordBidInHistory(e.bidder,e.cpm,!1)}))}},{key:"recordWinForBidder",value:function(e,t){__ez.vhb.adsShown++,__ez.vhb.bidders.hasOwnProperty(e)||(__ez.vhb.bidders[e]={bidsResponded:1,bidsWon:0,maxBidValue:-1}),__ez.vhb.bidders[e].bidsWon++,__ez.vhb.bidders[e].maxBidValue<t&&(__ez.vhb.bidders[e].maxBidValue=t),this.recordBidInHistory(e,t,!0)}},{key:"setPrebidCPMEarnedFromPreviousAd",value:function(e,t){t?this.outstreamPrebidCPMFromPreviousAd=e:this.instreamPrebidCPMFromPreviousAd=e}},{key:"cleanupPrebidRenderer",value:function(e){T("No bids for adBreak, cleaning up",e),e.isComplete=!0,e.key&&e.markBreakAsComplete(e.key,e.isFloating),this.biddingInProcess[e.getPlayerId()]=!1;var t=new Event("NoBidsForPrebidRenderer");t.AdBreak=e,this.target.dispatchEvent(t)}},{key:"preloadAmazonH2BidLibrary",value:function(){"undefined"==typeof __ez||void 0===__ez.fads||void 0===__ez.fads.amznH2Bid||__ez.fads.amznH2Bid.loaded||"function"==typeof __ez.fads.loadLibrary&&__ez.fads.loadLibrary(__ez.fads.amznH2Bid.url,"amznH2Bid")}},{key:"isSingleAPSAuctionTestActive",value:function(){var e;return"true"===(null===(e=__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.vamacsaa)}},{key:"shouldConsiderCustomBreaksOutstreamCollision",value:function(e){var t,r;if(!e.isOutstream&&e.isAdBreakCustomPosition()&&0===e.timeOffsetSeconds)return null===(r=ezVideoAdConductor)||void 0===r||null===(r=r.getVideoAdConductor())||void 0===r||null===(r=r.getOutstreamPlayer())||void 0===r?void 0:r.isAdInProgress();var i=null===(t=window.__ez)||void 0===t||null===(t=t.nextCustomBreak)||void 0===t?void 0:t.break;if(!i)return!1;if(i.isTriggered||i.isComplete||i.IsSkipped)return!1;if(!i.getIsPlayerCurrentlyFloating()&&e.isOutstream){var n=this.getTimeUntilNextBreak(e.getPlayerId(),i);if(n<=-1&&(n=window.__ez.nextCustomBreak.timeUntilBreak||0),n<=15)return!0;if(n<=30&&e.prebidParams&&e.prebidParams.maxduration>=16)return!0}return!1}},{key:"handleCustomBreaksOutstreamCollision",value:(i=w(P().mark((function e(t,r){var i,n,o,a,s;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isOutstream||!t.isAdBreakCustomPosition()||0!==t.timeOffsetSeconds){e.next=7;break}return T("Skipping custom break preroll since outstream is currently playing"),t.isTriggered=!0,t.isComplete=!0,t.key&&t.markBreakAsComplete(t.key,t.isFloating),this.biddingComplete(t.getPlayerId()),e.abrupt("return");case 7:i=window.__ez.nextCustomBreak,n=i.break,o=0;try{a=n.getPlayerId(),(o=this.getTimeUntilNextBreak(a,n))<=-1&&null!=i.timeUntilBreak&&(o=i.timeUntilBreak)}catch(e){o=null!==(s=i.timeUntilBreak)&&void 0!==s?s:0}if(!(o<=15)){e.next=16;break}return T("Waiting for custom break to finish before bidding",t.impressionId),e.next=15,new Promise((function(e){return setTimeout(e,1e3*o)}));case 15:this.bid(t,r);case 16:o<=30&&t.isOutstream&&t.prebidParams&&t.prebidParams.maxduration>=16&&(T("Updating maxduration to 15 seconds for outstream break",t.impressionId),t.prebidParams.maxduration=15,this.bid(t,r));case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"getTimeUntilNextBreak",value:function(e,t){var r=-1;if(e){var i=t.getPlayerById(e);if(i&&"function"==typeof i.getCurrentVideoTime){var n=i.getCurrentVideoTime();null!=t.timeOffsetSeconds&&null!=n&&(r=t.timeOffsetSeconds-n)}}return r}},{key:"bidSingle",value:(r=w(P().mark((function e(){var t,r,i,n,o,a,s,d,u,l,c,p,f,h,v;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("true"===(null===(t=__ez)||void 0===t||null===(t=t.tf)||void 0===t?void 0:t.vaifgf)){e.next=2;break}return e.abrupt("return",!1);case 2:return window.__ezVideoFill||(window.__ezVideoFill={}),r=window._ez_sa||window._ez_send_requests_through_ezoic||window.hasOwnProperty("ezIntType")&&"wp"===window.ezIntType?"https://g.ezoic.net":window.location.origin,(i=new URL("/ez-vast-single",r)).search=new URLSearchParams({ads_enabled:2,pageview_id:_ezaq.page_view_id,content_id:"acqOGaOjHWf",player_id:"ez-4999",position_id:4999,floor_version:0,autoplay:1,floaating:1,nd:1,pv_ep:_ezaq.t_epoch}),e.prev=6,e.next=9,fetch(i);case 9:if((n=e.sent).ok){e.next=12;break}throw new Error("HTTP error! status: ".concat(n.status));case 12:return e.next=14,n.json();case 14:if((o=e.sent)&&o.vastURL){e.next=18;break}return T("No VAST URL in response"),e.abrupt("return",!1);case 18:(a=new Vt(o)).isFloating=!1,window.__ezVideoFill.isFetching=!0,s=new DOMParser,d=!1;case 23:if(a.vastURL){e.next=27;break}return T("No VAST URL available"),e.abrupt("break",60);case 27:return e.next=29,fetch(a.vastURL);case 29:if((u=e.sent).ok){e.next=32;break}throw new Error("HTTP error! status: ".concat(u.status));case 32:return e.next=34,u.text();case 34:if(l=e.sent,c=s.parseFromString(l,"text/xml"),!((p=c.getElementsByTagName("VAST")[0])&&p.children.length>0)){e.next=46;break}return a.vastXML=c,f=d?a.videoFallbackFloors[a.bidFloorIndex]:a.videoAdBidFloorUnmodified,window.__ezVideoFill={isFetching:!1,bidFloor:f,bidHash:d?a.videoFallbackHashes[a.bidFloorIndex]:a.videoAdBidHash,adBreak:a},"undefined"!=typeof _ezaq&&"undefined"!=typeof __ez&&__ez.ce.AddPageviewEvent("google_informed_video_ad_fill",f),a.isOutstream&&"undefined"!=typeof __ezOutstream?__ezOutstream.UnfilledCnt=0:a.isOutstream||"undefined"==typeof __ezInstream||(__ezInstream.UnfilledCnt=0),a.isComplete=!0,e.abrupt("return",!0);case 46:if(!(a.bidFloorIndex<a.videoFallbackFloors.length-1)){e.next=57;break}return d&&a.bidFloorIndex++,a.retryCount++,(h=a.lastBidHash)&&h.includes(",")&&(h=encodeURIComponent(h)),(v=a.videoFallbackHashes[a.bidFloorIndex]).includes(",")&&(v=encodeURIComponent(v)),a.vastURL=a.vastURL.replace(/(eb_br%3D)[^%&]+/,"$1".concat(v)),a.lastBidHash=v,d=!0,e.abrupt("continue",23);case 57:return e.abrupt("break",60);case 60:a.isComplete=!0,e.next=66;break;case 63:e.prev=63,e.t0=e.catch(6),T("Error in bidSingle:",e.t0);case 66:return window.__ezVideoFill.isFetching=!1,e.abrupt("return",!1);case 68:case"end":return e.stop()}}),e,null,[[6,63]])}))),function(){return r.apply(this,arguments)})},{key:"recordBidInHistory",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.globalBidHistory[e]||(this.globalBidHistory[e]={bids:[],avgBid:0,maxBid:0,winCount:0,totalBids:0});var i=this.globalBidHistory[e];i.bids.push({cpm:t,timestamp:Date.now(),wasWinner:r}),i.totalBids++,i.avgBid=(i.avgBid*(i.totalBids-1)+t)/i.totalBids,i.maxBid=Math.max(i.maxBid,t),r&&i.winCount++,i.bids.length>100&&i.bids.shift()}},{key:"getBidderPerformance",value:function(){var e=0,t=0,r=0;return Object.values(this.globalBidHistory).forEach((function(i){i.bids.forEach((function(i){e++,i.wasWinner&&t++,r+=i.cpm}))})),{winRate:e>0?t/e:0,avgBid:e>0?r/e:0}}},{key:"initializeBidFilter",value:function(){var e;"true"===(null===(e=__ez)||void 0===e||null===(e=e.tf)||void 0===e?void 0:e.vacbc)&&epbjs.que.push((function(){var e=tr.initVideoBidFilter();void 0===window.__ez&&(window.__ez={}),void 0===window.__ez.vbf&&(window.__ez.vbf={}),window.__ez.vbf=e,T("Video bid filter initialized to prevent low CPM bids from being cached externally")}))}},{key:"externalBidCacheFix",value:(t=w(P().mark((function e(t,r){var i,n,o,a,s,d,u;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("true"!==(null===(i=__ez)||void 0===i||null===(i=i.tf)||void 0===i?void 0:i.vacbc)){e.next=11;break}n=0;case 2:if(!(n<(null==t||null===(o=t.bids)||void 0===o?void 0:o.length))){e.next=10;break}return a=t.bids[n],e.next=6,tr.cacheOrFilterBid(a);case 6:t.bids[n]=e.sent;case 7:n++,e.next=2;break;case 10:return e.abrupt("return");case 11:s=0;case 12:if(!(s<(null==t||null===(d=t.bids)||void 0===d?void 0:d.length))){e.next=21;break}if("unruly"!==(u=t.bids[s]).bidder||!r.isOutstream||"client"!==u.source){e.next=18;break}return e.next=17,tr.cacheExternallyAndUpdateTargeting(u);case 17:t.bids[s]=e.sent;case 18:s++,e.next=12;break;case 21:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})}]);var t,r,i,n,a}(),vr=function(){return d((function e(){o(this,e)}),[{key:"init",value:function(){__ez.vhb=new hr}}])}();var mr,br;mr=new y,br=new vr,mr.init(),br.init()})()})();