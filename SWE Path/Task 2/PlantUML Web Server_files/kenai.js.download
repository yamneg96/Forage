try { !function(){function e(i){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(i)}function i(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function r(e,i){for(var t=0;t<i.length;t++){var r=i[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,i,t){return i&&r(e.prototype,i),t&&r(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}if("function"!=typeof PrebidImpressionController){var s=function(){function e(){i(this,e),o(this,"prebidImpressions",{}),o(this,"auctions",{}),o(this,"slotAuctions",{}),o(this,"videoAuctions",{})}return n(e,[{key:"recordAndFireImpressionWonEvent",value:function(e){e.bid_won=1,e.is_event=!0,new PrebidImpression(e,!0).fire()}},{key:"recordAuctionEndImpressions",value:function(e){var i={};this.assignFloorsToBids(e),e.bidderRequests.forEach((function(e){0!==e.bids.length&&e.bids.forEach((function(e){i[e.bidId]=new PrebidImpression(e,!1)}))})),e.bidsReceived.forEach((function(e){i.hasOwnProperty(e.requestId)?i[e.requestId].addAndTranformFields(e):i[e.requestId]=new PrebidImpression(e,!0)})),this.prebidImpressions=Object.assign(this.prebidImpressions,i)}},{key:"batchFireAll",value:function(){this.batchFire(Object.values(this.prebidImpressions)),this.prebidImpressions={}}},{key:"batchFireForUnit",value:function(e){var i=this,t=Object.values(this.prebidImpressions).filter((function(i){return i.ad_unit_code===e}));this.batchFire(t),t.forEach((function(e){delete i.prebidImpressions[e.request_id]}))}},{key:"batchFire",value:function(e){if(null!=e&&0!==e.length){var i=e[0].getBaseUrl()+e[0].storeUrl,t=e.map((function(e){return e.filterForValidObjectFields()})),r=btoa(JSON.stringify(t));if("undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon)navigator.sendBeacon(i,r);else{var n=new XMLHttpRequest;n.open("POST",i+"?e="+r,!0),n.send()}}}},{key:"assignFloorsToBids",value:function(e){if(e&&e.adUnits&&e.bidderRequests)for(var i=e.adUnits,t=e.bidderRequests,r=function(e){for(var r=function(r){var n=i.filter((function(i){return i.adUnitId===t[e].bids[r].adUnitId}))[0];if(!n)return"continue";n&&n.floors&&n.floors.values&&n.floors.values.banner?t[e].bids[r].ezFloor=n.floors.values.banner:n&&n.floors&&n.floors.values&&n.floors.values["video|*"]&&(t[e].bids[r].ezFloor=n.floors.values["video|*"])},n=0;n<t[e].bids.length;n++)r(n)},n=0;n<t.length;n++)r(n)}}]),e}();window.PrebidImpressionController=new s}if("function"!=typeof PrebidImpression){var a=function(){function r(e,t){var n=this;if(i(this,r),o(this,"storeUrl","/detroitchicago/bluemonkey.gif"),o(this,"fieldToColumnMap",{auctionId:"auction_id",bidId:"request_id",requestId:"request_id",adapterCode:"adapter_code",bidder:"adapter_code",adUnitCode:"ad_unit_code",originalCpm:"original_cpm",timeToRespond:"time_to_respond",size:"response_size",src:"source",ezFloor:"floor"}),this.isEvent=t,this.addAndTranformFields(e),!this.request_id)throw new Error("Missing required fields for PrebidImpression");if(!t){this.pageview_id=_ezaq.page_view_id,this.domain_id=parseInt(_ezaq.domain_id),this.form_factor_id=parseInt(_ezaq.form_factor_id),this.ab_test_id=_ezaq.ab_test_id,this.url=window.location.href,this.country=_ezaq.country,this.epoch=(new Date).getTime(),this.has_ezids=this.checkEzids();var s=this.adapter_code.toLowerCase();if(this.stat_source_id=parseInt(epbjs.SS[s]),e.mediaTypes.video){if(__ez.vhb.breaks[e.adUnitCode]?this.impression_id=__ez.vhb.breaks[e.adUnitCode].impressionId:__ez.vhb&&__ez.vhb.floatingBreaks&&__ez.vhb.floatingBreaks[e.adUnitCode]&&(this.impression_id=__ez.vhb.floatingBreaks[e.adUnitCode].impressionId),this.media_type=e.mediaTypes.video.context,"instream"==this.media_type&&__ezInstream&&__ezInstream.prebidBidders){var a=__ezInstream.prebidBidders.filter((function(e){return e.bidder===n.adapter_code}));a.length>0&&(this.stat_source_id=parseInt(a[0].ssid))}if("outstream"==this.media_type&&__ezOutstream&&__ezOutstream.prebidBidders){var d=__ezOutstream.prebidBidders.filter((function(e){return e.bidder===n.adapter_code}));d.length>0&&(this.stat_source_id=parseInt(d[0].ssid))}this.request_size=e.mediaTypes.video.w+"x"+e.mediaTypes.video.h}else if(e.mediaTypes.banner){this.media_type="banner",this.request_size=e.mediaTypes.banner.sizes.map((function(e){return e.join("x")})).join(",").substring(0,64);var u=this.getEzSlotTargetingForAdCode(e.adUnitCode);if(googletag&&googletag.pubads&&googletag.pubads().getSlots){var l=googletag.pubads().getSlots().filter((function(i){return i.getSlotElementId()===e.adUnitCode}))[0];l&&(u=l.getTargetingMap())}if(u){var c=u.tap||"";(c=(c+"").split("-")).length>1&&(this.impression_id=parseInt(c[c.length-1])),this.position_type=u.al%1e3||-1,this.refresh_count=1*u.alc||1}}}}return n(r,[{key:"getEzSlotTargetingForAdCode",value:function(e){if(!Array.isArray(window.ezslots_raw))return{};var i=ezslots_raw.filter((function(i){if(!i.tap||!i.tap.includes("-"))return!1;var t=i.tap.split("-").slice(1,-1).join("-");if(!t){if(!e.startsWith("div-gpt-ad"))return!1;var r=(t=e.replace("div-gpt-ad-","")).lastIndexOf("-");return r>0&&(t=t.substring(0,r)),t.length>0&&i.tap.startsWith(t)}return t.length>0&&e.includes(t)}));return i.length?i[0]:{}}},{key:"addAndTranformFields",value:function(e){var i=this;Object.keys(e).forEach((function(t){var r=t;i.fieldToColumnMap.hasOwnProperty(t)&&(r=i.fieldToColumnMap[t]),i[r]=e[t]})),e.meta&&e.meta.advertiserDomains&&(this.advertiser_domains=e.meta.advertiserDomains.join(",").substring(0,1023)),e.cpm&&e.originalCpm&&(this.adjustment=isNaN(e.cpm/e.originalCpm)?null:e.cpm/e.originalCpm)}},{key:"filterForValidObjectFields",value:function(){var e=this,i=["request_id"];i.forEach((function(i){if(!e.hasOwnProperty(i))throw new Error("prebid impression missing required field: "+i,t)}));var r=i.concat(["bid_won","is_event"]);this.isEvent||(r=r.concat(["ab_test_id","ad_unit_code","adapter_code","auction_id","domain_id","form_factor_id","has_ezids","impression_id","media_type","pageview_id","position_type","refresh_count","request_size","source","stat_source_id","floor","epoch","country","adjustment","advertiser_domains","cpm","original_cpm","response_size","time_to_respond"]));var n={};for(var o in this)r.includes(o)&&(n[o]=this[o]);return n}},{key:"getBaseUrl",value:function(){return void 0!==window._ez_sa&&1==window._ez_sa||void 0!==window.ezWp&&!0===window.ezWp||void 0!==window.ezstandalone||window._ez_send_requests_through_ezoic?"https://g.ezoic.net":window.location.protocol+"//"+document.location.hostname}},{key:"checkEzids",value:function(){return"object"===e(window.ezoicIdentity)&&"function"==typeof window.ezoicIdentity.getUID&&null!==window.ezoicIdentity.getUID()?1:0}},{key:"fire",value:function(){var e=btoa(JSON.stringify([this.filterForValidObjectFields()]));if(void 0!==__ez.dot&&__ez.dot.hasOwnProperty("getURL")&&"undefined"!=typeof navigator&&"function"==typeof navigator.sendBeacon){var i=__ez.dot.getURL(this.storeUrl);navigator.sendBeacon(i,e)}else{var t=new XMLHttpRequest;t.open("POST",this.getBaseUrl()+this.storeUrl+"?e="+e,!0),t.send()}this.fired=!0}}]),r}();window.PrebidImpression=a}}();} catch(err) {var hREED = function(er) {return function() {reportEzError(er, "/detroitchicago/kenai.js")}}; typeof reportEzError==="function"?hREED(err):window.addEventListener('reportEzErrorDefined',hREED(err), {once: true}); console.error(err);}